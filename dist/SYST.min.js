/*
* SYST.js v2.1.1
* Copyright  2016, Rodey Luo
* Released under the MIT License.
* Date Tue Dec 12 2017 16:42:08 GMT+0800 (中国标准时间)
*/
!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t)}):e(t)}(this,function(){"use strict";function t(t,e,n){Object.defineProperty(t,e,{value:n,enumerable:!1,writable:!0,configurable:!1})}var e=Array.prototype.slice,n=Object.prototype.toString,i=Object.prototype.hasOwnProperty,s=function(t){var e,n=t,i={};for(e in n)n.hasOwnProperty(e)&&(i[e]=n[e]);return i},r=function(t,e){t=t||{},e=e||{};var n=s(t);for(var i in e)n[i]=e[i];return n};return!Object.keys&&(Object.keys=function(t){if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e,n=[];for(e in t)i.call(t,e)&&n.push(e);return n}),!Object.values&&(Object.values=function(t){if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e,n=[];for(e in t)i.call(t,e)&&n.push(t[e]);return n}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var n=e.call(arguments,1),i=this,s=function(){},r=function(){return i.apply(this instanceof s?this:t,n.concat(e.call(arguments)))};return this.prototype&&(s.prototype=this.prototype),r.prototype=new s,r}),window.SYST=window.ST=function(){var t=function(){},e=function(e,n){var e=Array.prototype.slice.call(e),i=e[0],s=0,o={},a=e.length,c="__proto__"in o;if(t.V.isObject(i)){if(a>1&&"__instance_SYST__"in i){for(e.shift();s<a;++s)o=r(o,e[s]);return c?o.__proto__=i:o=r(o,i),o}for(;s<a;++s)o=r(o,e[s]);return c?o.__proto__=new n:o=r(o,n.prototype),o}return c?o.__proto__=new n:o=new n,o};return t.ready=function(e){/complete|loaded|interactive/.test(document.readyState)&&document.body?e(t.$):document.addEventListener("DOMContentLoaded",function(){e(t.$)},!1)},t.extend=r,t.extendClass=e,t.clone=s,t}.call(this),function(t){var e=function(){this.__instance_SYST__="SYST Validate",this.__Name__="Validate"};t.Validate=function(){return t.extendClass(arguments,e)},t.V=e.prototype={isEmpty:function(t){return!t||0===t.length||null==t},isCN:function(t,e){return e?/^[\u4e00-\u9fa5]+$/.test(t):/[\u4e00-\u9fa5]+/gi.test(t)},isEmail:function(t){return/^([a-z0-9]+([\.\-_]?[a-z0-9]+)?)@([a-z0-9]+)\.([a-z0-9]+(\.[a-z0-9]+)?)$/i.test(t)},isURL:function(t){return/^http:\/\/[\w\d]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/i.test(t)},isTel:function(t){return/^(\(\d{3,4}\)|\d{3,4}-)?\d{7,8}$/gi.test(t)},isMobile:function(t){return/^1[3|4|5|7|8]{1}\d{9}$/.test(t)},isZip:function(t){return/^\d{6}$/.test(t)},isDateLocal:function(t){return/^(\d{4})-(\d{1,2})-(\d{1,2})$/.test(t)},isDateTime:function(t){return/^(\d{4})-(\d{1,2})-(\d{1,2})\s+(\d{1,2}):(\d{1,2}):(\d{1,2})$/.test(t)},isTime:function(t){return/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/.test(t)},isNull:function(t){return null==t},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:function(t){return"[object Array]"===n.call(t)},isDate:function(t){return"[object Date]"===n.call(t)},isObject:function(t){return"[object Object]"===n.call(t)},isFunction:function(t){return"function"==typeof t},isFile:function(t){return"[object File]"===n.call(t)},isBlob:function(t){return"[object Blob]"===n.call(t)},isBoolean:function(t){return"boolean"==typeof t},isdefined:function(t){return"undefined"!=typeof t},isRegExp:function(t){return"[object RegExp]"===n.call(t)},isWindow:function(t){return t&&t.document&&t.location&&t.alert&&t.setInterval},isDocument:function(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE},isElement:function(t){return!!(t&&t.nodeName&&t.nodeType)},isNodeList:function(t){return"[object NodeList]"===n.call(t)},isBetween:function(t,e,n,i){return i?t.length>=e&&t.length<=n:t.length>e&&t.length<n}}}(SYST),function(t){var e=navigator.userAgent.toUpperCase(),n=e.indexOf("ANDROID")!==-1,i=e.indexOf("IPHONE OS")!==-1,s=!(!n&&!i),r=e.indexOf("MOBILE")!==-1,o=e.indexOf("IPAD")!==-1,a=!(!r&&!o),c=function(){this.__instance_SYST__="SYST Native",this.__Name__="SYST Native"};t.Native=function(){return t.extendClass(arguments,c)},t.N=c.prototype={UA:e,isAndroid:n,isIos:i,isNative:s,isPhone:r,isPad:o,isMobile:a,callNative:function(t){}}}(SYST),function(t){function i(n,i,s){if(!n)throw new SyntaxError("args1 is must Object or Array or String");var r,o=0;if(t.V.isObject(n)){var a,c=0,h=Object.keys(n);if(r=h.length,0===r)return;for(;o<r;++o)if(a=h[o],n.hasOwnProperty(a)&&!1===i.call(s||n,n[a],c++,a))return n}else if(n&&n.length||t.V.isArray(n)){if(t.V.isArray(n)||(n=e.call(n)),r=n.length,0===r)return;for(;o<r;++o)if(!1===i.call(s||n,n[o],o))return n}}function s(t,e,n){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(e))||null===e||void 0===e)){if(n=n||{},null!==e&&void 0!==e||(n.expires=-1),"number"==typeof n.expires){var i=n.expires,s=n.expires=new Date;s.setDate(s.getDate()+i)}return e=String(e),document.cookie=[encodeURIComponent(t),"=",n.raw?e:encodeURIComponent(e),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}n=e||{};for(var r,o=n.raw?function(t){return t}:decodeURIComponent,a=document.cookie.split("; "),c=0;r=a[c]&&a[c].split("=");c++)if(o(r[0])===t)return o(r[1]||"");return null}function r(e,n){var r;if(e)if(t.V.isObject(e))i(Object.keys(e),function(t){r=e[t],r&&s(t,e[t],n)},this);else if(t.V.isArray(e)){for(var o,a={},c=0,h=e.length;c<h;++c)o=e[c],a[o]=s(o);return a}}var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},a=/^([a-zA-Z]){1}/i,c=function(){this.__instance_SYST__="SYST Tools",this.__Name__="Tools"};t.Tools=function(){return t.extendClass(arguments,c)},t.T=c.prototype={proxy:function(i,s,r){var o=[];i=i||window;var a=2;for(void 0==r?r=!0:a=3;a<arguments.length;a++)o.push(arguments[a]);return function(o){o&&/^\[object\s[A-Z][a-z]+Event\]$/.test(n.call(o))&&r&&(o.stopPropagation(),o.stopImmediatePropagation());var a=e.call(arguments);if(t.V.isFunction(s))return s.apply(i,a);if(i[s])return i[s].apply(i,a);throw new Error(s+" 函数未定义！")}},trim:function(e){return t.V.isString(e)?e.replace(/^\s*|\s*$/gi,""):""},rtrim:function(e,n,i){if(!t.V.isString(e))return"";if(n){var s;return s=i?new RegExp("\\"+n+"*","gi"):new RegExp("^(\\"+n+")*|(\\"+n+")*$","gi"),e.replace(s,"")}return this.trim(e)},indexOf:function(t,n){if(t.indexOf)return t.indexOf(n);t=e.call(t);for(var i=0,s=t.length;i<s;i++)if(n===t[i])return i;return-1},arrRemove:function(t,e){var n=this.indexOf(t,e);return n>=0&&t.splice(n,1),t},toFirstUpperCase:function(t){return t?a.test(t)?t.replace(a,function(t,e){return e.toUpperCase()}):t:""},toFirstLowerCase:function(t){return t?a.test(t)?t.replace(a,function(t,e){return e.toLowerCase()}):t:""},F2C:function(t){for(var e="",t=t.replace(/\s*/gi,""),n=0,i=t.length;n<i;n++){var s=t.charCodeAt(n);e+=12288!=s?s>65280&&s<65375?String.fromCharCode(s-65248):String.fromCharCode(s):String.fromCharCode(32)}return e=e.replace(/\s*/gi,""),e.toUpperCase()},escapeHtml:function(t){return t.replace(/&(?![\w#]+;)|[<>"']/gi,function(t){return o[t]})},dateFm:function(t){return t<10?"0"+t:t},setDateFormat:function(e,n){function i(t,e){return t.length>1?s.dateFm(e):e}if(!e)return"";var s=this;return n=n||"yyyy-mm-dd hh:ii:ss",(e=/^\d+$/gi.test(e)||/\d+[\/-]+/gi.test(e)?new Date(parseInt(e,10)):t.V.isDate(e)?e:null)?n=n.replace(/(y+)/i,function(t){var n=""+e.getFullYear();return t.length>=4?n:n.substr(t.length)}).replace(/(m+)/i,function(t){return i(t,e.getMonth()+1)}).replace(/(d+)/i,function(t){return i(t,e.getDate())}).replace(/(h+)/i,function(t){return i(t,e.getHours())}).replace(/(i+)/i,function(t){return i(t,e.getMinutes())}).replace(/(s+)/i,function(t){return i(t,e.getSeconds())}):null},dateFormat:function(t,e){return this.setDateFormat(t,e)},setDateFormatCN:function(t,e){var n=["年","月","日","时","分","秒","毫秒"],i=this.setDateFormat(t,e).split(/[-:\s]+/gi);return i&&0!==i.length?(this.each(i,function(t,e){i[e]=(3===e?" ":"")+t+n[e]}),i.join("")):""},dateFormatCN:function(t,e){return this.setDateFormatCN(t,e)},getDateDiff:function(t,e){var n=Date.parse(e)-Date.parse(t),i=Math.floor(n/864e5),s=n%864e5,r=Math.floor(s/36e5),o=s%36e5,a=Math.floor(o/6e4),c=o%6e4,h=Math.round(c/1e3);return{days:i,hours:r,minutes:a,seconds:h}},params:function(e,n){var i="?";if(this._pars&&this._pars[e])return this._pars[e];var s="";if(t.V.isEmpty(n)?s=location.href.split(i)[1]:/\?+/i.test(n)&&(s=n.split(i)[1]||""),t.V.isEmpty(s))return{};var r=s.replace(/^\?/,"").split("&");if(!r||[]===r)return{};for(var o=0,a=r.length,c={};o<a;++o){var h=r[o].split("=");h[0]&&""!==h[0]&&(c[h[0]]=decodeURI(h[1])||null)}return this._pars=c,e?decodeURI(c[e]):c},getParams:function(e,n){var i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),s="";return s=t.V.isEmpty(n)?window.location.search.substr(1).match(i):(n.split("?")[1]||"").match(i),s?decodeURI(s[2]):null},paramData:function(e,n){if(t.V.isEmpty(e)||!t.V.isObject(e))return"";var s="";return i(e,function(t,e,n){s+="&"+n+"="+encodeURI(t)}),s=s.substr(1),n===!0?"?"+s:s},serialize:function(t,e){return this.paramData(t,e)},unserialize:function(t){return this.params(null,t)},jumpTo:function(e,n){var e=e||"#";t.V.isString(n)?e=e+"?"+n:t.V.isObject(n)&&(e+=t.T.paramData(n,!0)),location.href=e},redirect:function(t,e){this.jumpTo(t,e)},displace:function(t){if(t){var n=0,s=[],r=/\%[s|d|f]+?/gi;return i(e.call(arguments,1),function(t){s.push(t)}),t=t.replace(r,function(t){return s[n++]})}},Cookie:s,getCookie:function(e){return t.V.isString(e)?s(e):r(e)},setCookie:function(e,n,i){return t.V.isString(e)?s(e,n,i):r(e,i)},each:i,extend:t.extend,clone:t.clone,arr2object:function(t,e,n){var s={};return e?s[e]=t:i(t,function(t,e){n?s[t]=t:s[e]=t}),s},unique:function(t){var e=[];return i(t,function(t){e.indexOf(t)===-1&&e.push(t)}),e},merge:function(e,n,i){var s;return e?n?(t.V.isArray(e)&&t.V.isArray(n)?(s=[].concat(e,n),s=i===!0?this.unique(s):s):s=t.V.isObject(e)&&t.V.isObject(n)?t.extend(e,n):e+n,s):e:n},json:{stringify:function(){return JSON.stringify.apply(null,arguments).replace(/\"/g,"_@")},parse:function(){var t=arguments[0].replace(/_\@/g,'"');return JSON.parse(t)}}}}(SYST),function(n){function i(t,e){this.context=this.target=t,this.selector=e,this._init()}var s=/^\s*<(\w+|!)([^>]*)>/,r=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,o=/^\[([^=]+?)(?:=[^\]])*?\]$/,a=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,c=document.createElement("table"),h=document.createElement("tr"),u={tr:document.createElement("tbody"),tbody:c,thead:c,tfoot:c,td:h,th:h,"*":document.createElement("div")},l={},p=["focus","blur"],f=["submit","reset"],d=["click","input","dblclick","mouseover","mouseout","keydown","keyup","change"].concat(p,f),m={preventDefault:function(){window.event&&(window.event.returnValue=!1)},stopImmediatePropagation:function(){this.stopImmediatePropagation&&this.stopImmediatePropagation()},stopPropagation:function(){window.event&&(window.event.cancelBubble=!0)}};i.prototype={clone:function(){return new i(this.context.cloneNode.apply(this.context,arguments))},append:function(t){return t?(t&&t._dom_?n.T.each(t,function(t){this.append(t)},this):this.context.appendChild(this._toNode(t)),this):this},appendTo:function(t){return t&&t.appendChild(this.context),this},prepend:function(t){var e=this.context.firstChild;return this.context.insertBefore(this._toNode(t),e),this},prependTo:function(t){var e=t.firstChild||t.childNodes[0];return e&&t.insertBefore(this.context,e),this},after:function(t){if(!this._parent())return this;var e=this.context.nextElementSibling||this.context.nextSibling;return this._parent().insertBefore(this._toNode(t),e),this},before:function(t){return this._parent()?(this._parent().insertBefore(this._toNode(t),this.context),this):this},replace:function(t){return this._parent()?(this._parent().replaceChild(this._toNode(t),this.context),this):this},remove:function(){return this._parent()?(this._parent().removeChild(this.context),this):this},swap:function(t){var e;n.V.isString(t)&&"#"===n.T.trim(t)[0]&&(e=new i(t,t)),t instanceof i&&(e=t);var s=e.clone(!0),r=this.clone(!0);this.replace(s),e.replace(r)},attr:function(t,e){return void 0==e?this.context.getAttribute(t):(n.V.isObject(t)?n.T.each(Object.keys(t),function(e,n){this.attr(e,t[e])},this):this.context.setAttribute(t,e),this)},removeAttr:function(t){return this.context.removeAttribute(t),this},prop:function(t,e){return void 0==e?this.context[t]:(n.V.isObject(t)?n.T.each(Object.keys(t),function(e,n){this.prop(e,t[e])},this):this.context[t]=e,this)},removeProp:function(t){this.context[t]=void 0,delete this.context[t]},children:function(t){function s(t,e){r.push(new i(t,e))}var r=[];i._inJectMethods(r),t=n.T.trim(t||"");var a=this.context.children?e.call(this.context.children):e.call(this.context.childNodes).filter(function(t){return 3!==t.nodeType});return a.length>0&&n.T.each(a,function(n){var i="#"===t[0],r=!i&&"."===t[0],a=o.test(t),c=i||r?t.slice(1):t;if(!t||i&&n.id===c||r&&e.call(n.classList).indexOf(c)!==-1)s(n,t);else if(a){var h=t.match(o)[1];h&&n.getAttribute(h)&&s(n,t)}else i||r||n.tagName==t.toUpperCase()&&s(n,t)},this),r},childrenAll:function(t){function e(i){var r=i.children(t);r&&r.length>0&&n.T.each(r,function(n){s.push(n),r=n.children(t),r&&e(n)})}var s=[];return i._inJectMethods(s),e(this),s},parent:function(){return this._parent()&&new i(this._parent())},parents:function(t){var s=[],r=this.context.parentNode;for(i._inJectMethods(s);r;)!n.V.isDocument(r)&&s.indexOf(r)<0?(r.parentNode&&s.push(r),r=r.parentNode):r=null;return s=s.filter(function(n){var i=t.replace(/^#/,""),s=t.replace(/^./,""),r=o.test(t),a=e.call(n.classList)||[],c=n.getAttribute(r),h=function(){if(!r)return!1;var e=t.match(o)[1];return!(!e||!n.getAttribute(e))||void 0}();return t==n.nodeName||i==n.id||a.indexOf(s)>-1||c||h}),s=s.map(function(e){return new i(e,t)})},next:function(t){var e=[];if(t)e=this._all("nextAll");else if(this.context.nextElementSibling)return new i(this.context.nextElementSibling);return e},nextAll:function(){return this._all("nextAll")},prev:function(t){var e=[];if(t)e=this._all("prevAll");else if(this.context.previousElementSibling)return new i(this.context.previousElementSibling);return e},prevAll:function(){return this._all("prevAll")},siblings:function(){var t=this.parent().children(),e=n.T.indexOf(t.map(function(t){return t.context}),this.context);return e>-1&&t.splice(e,1),t},find:function(t){var s=[],r=i._qsa(this.context,t);return n.V.isArray(r)||r.length>0?n.T.each(e.call(r),function(e){s.push(new i(e,t))}):r&&n.V.isElement(r)&&s.push(new i(r,t)),i._inJectMethods(s),s},show:function(t){if(t)this.css("display",t);else{"none"==this.css("display")&&this.css("display","");var e=getComputedStyle(this.context),n=e.getPropertyValue("display");"none"==n&&this.css("display",this._getDefaultDisplay(this.context.nodeName))}return this},hide:function(){return this.css("display","none"),this},toggle:function(){return"none"==this.context.css("display")?this.show():this.hide()},css:function(t,e){function i(t){return t=t.replace(/-([a-z]{1})/gi,function(t,e){return(e||"").toUpperCase()})}function s(t,e){this.context.style[t]=e}if(n.V.isObject(t))n.T.each(t,function(t,e,n){s.call(this,i(n),t)},this);else{if(null==e)return this.context.style[t];s.call(this,i(t),e)}return this},hasClass:function(t){for(var i=this.context.classList?e.call(this.context.classList):this.context.className.split(/\s+/g),s=!!n.V.isString(t)&&/\|/.test(t),r=n.V.isArray(t)&&t||n.T.trim(t||"").split(/\s+|\|+|\++/),o=!1,a=0;a<r.length;++a){var c=i.indexOf(""+r[a]);if(c>-1){if(s)return!0;o=!0}else o=!1}return o},addClass:function(t){var e=this.context.classList,i=n.V.isArray(t)&&t||n.T.trim(t||"").split(/\s+/);return n.T.each(i,function(t){n.T.indexOf(e,t)<0&&e.add(t)},this),this},removeClass:function(t){var e=this.context.classList,i=n.V.isArray(t)&&t||n.T.trim(t||"").split(/\s+/);return n.T.each(i,function(t){n.T.indexOf(e,t)>-1&&e.remove(t)},this),0===e.length&&this.removeAttr("class"),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},html:function(t){return null==t?this.context.innerHTML:(3===this.context.nodeType&&this.text(t),n.V.isElement(t)&&(t=t.outerHTML),i._isDom(t)&&(t=t.context.outerHTML),this.context.innerHTML=t,this)},text:function(t){return n.V.isString(t)?(this.context.textContent=t,this):this.context.textContent},val:function(t){if(/INPUT|TEXTAREA|SELECT/i.test(this.context.nodeName)){if(null==t)return this.context.value||"";this.context.value=t}return this},load:function(t,e){n.Ajax.load(this.selector,t,e)},closet:function(t,i){var s=[],r=e.call(this.find(t)).map(function(t){return t.context}),o=i.parentNode;if(1===r.length&&r[0]===i)return r;if(n.T.each(r,function(t){t===i&&s.push(t)}),s.length>0)return s;for(;o&&n.T.indexOf(r,o)===-1;)o=o!==i&&!n.V.isDocument(o)&&o.parentNode;return o&&n.T.indexOf(s,o)<0&&s.push(o),s},once:function(t,e,n,i,s){this.on(t,e,n,i,s,!0)},on:function(t,i,s,r,o,a,c){var h,u={},l=i;a&&(l=function(e){return this._inJectTarget(e,e.currentTarget),this._removeEvent([u],t,i),i.apply(r||this,arguments)}.bind(this)),o&&(h=function(t){var e=this.closet(o,t.target)[0];return this._inJectTarget(t,e||t.target),e&&(l||i).apply(r||e,[t,s])}.bind(this));var p=h||l;return u.proxy=function(t){t=this._recombineEvent(t),this._inJectTarget(t,t.currentTarget),this._inJectProps(t,{$data:s});var n=p.apply(r||this,[t].concat(e.call(arguments,1)));return n===!1&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()),n}.bind(this),u.delegator=h,u.selector=o,u.container=this.selector,u.fn=i,u.type=t,n.Events._cache[t]||(n.Events._cache[t]=[]),!c&&n.Events._cache[t].push(u),"addEventListener"in this.context&&this.context.addEventListener(t,u.proxy,!1),this},off:function(t,e,i){if(t=n.T.trim(t||"")){var s=this._getCacheEvent(t,e,i);this._removeEvent(s,e)}else n.T.each(n.Events._cache,function(t){this._removeEvent(t,e)},this),n.Events._cache={};return this},delegate:function(t,e,n,i,s){return this.on(e,n,i,s,t)},undelegate:function(t,e,n){return this.off(e,t,n)},toString:function(){return this.context},_init:function(){this._mixinEvents()},_mixinEvents:function(){var t=this;n.T.each(d,function(n){i.prototype[n]=function(){var i=e.call(arguments)[0];return p.indexOf(n)>-1&&!i?t.context[n]():f.indexOf(n)>-1&&!i?t._isForm()&&t.context[n]():t.on(n,function(e){i.apply(t,arguments)}),t}})},_toNode:function(t){var e,r=document.createDocumentFragment();return n.V.isString(t)&&(t=n.T.trim(t),e="<"==t[0]&&s.test(t)?i._fragment(t):document.createTextNode(t)),t instanceof i&&(e=t.context),n.V.isElement(t)&&(e=t),n.V.isArray(e)&&e.length>0&&e[0].nodeType?n.T.each(e,function(t){t&&r.appendChild(t)}):r.appendChild(e),r},_removeEvent:function(t,e){t&&t.length>0&&n.T.each(t,function(t){if("removeEventListener"in this.context&&this.context.removeEventListener(t.type,t.proxy,!1),n.Events._cache[t.type]){var e=n.Events._cache[t.type].indexOf(t);e>-1&&n.Events._cache[t.type].splice(e,1)}},this)},_getCacheEvent:function(t,e,i){var s=t.split(/\s+/),r=[];return n.T.each(s,function(t){var i=n.Events._cache[t];i&&n.T.each(i,function(n){var i=/^#/.test(e);n.selector!=e||n.type!=t||!i&&n.container!=this.selector||r.push(n)},this)},this),r},_recombineEvent:function(t,e){return!e&&t.isDefaultPrevented||(e||(e=t),n.T.each(m,function(e,i,s){var r=t[s];n.V.isFunction(r)||(r=e.bind(this))},this)),t},_all:function(t){var n,s=[],r=e.call(this.parent().children()),o=r.map(function(t){return t.context}),a=o.indexOf(this.context);if("nextAll"===t)for(n=a+1;n<s.length;++n)s.push(r[n]);else if("prevAll"===t)for(n=a-1;n>=0;--n)s.push(r[n]);return i._inJectMethods(s),s},_isForm:function(){return"FORM"===this.context.nodeType&&this.context.action},_parent:function(){return this.context.parentNode},_getDefaultDisplay:function(t){if(l[t])return l[t];var e=document.createElement(t);document.body.appendChild(e);var n=getComputedStyle(e).getPropertyValue("display");return l[t]=n,e.parentNode.removeChild(e),n},_inJectProps:function(t,e){n.V.isObject(e)&&n.T.each(e,function(e,n,i){t[i]=e})},_inJectTarget:function(t,e){this._inJectProps(t,{$target:new i(e)})}},i._qsa=function(t,e){var i,s="#"===e[0],r=!s&&"."===e[0],o=s||r?e.slice(1):e,a=/^[\w-]*$/.test(o);return i=a&&s?t.querySelector(e):1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?null:a&&!s&&n.V.isElement(t)?r?t.getElementsByClassName(o):t.getElementsByTagName(o):t.querySelectorAll(e)},i._fragment=function(t,n){var i,o;return r.test(t)&&(i=document.createElement(RegExp.$1)),i?i:(t.replace&&(t=t.replace(a,"<$1></$2>")),void 0===n&&(n=s.test(t)&&RegExp.$1),n in u||(n="*"),o=u[n],o.innerHTML=""+t,i=e.call(o.childNodes),i[1]?i:i[0])},i._inJectMethods=function(s){var r=i.prototype,o=["_init","_mixinEvents"];n.V.isArray(s)&&(n.T.each(r,function(r,a,c){o.indexOf(c)===-1&&t(s,c,function(){var t,o=e.call(arguments),a=[];return n.T.each(s,function(e){if(d.indexOf(c)!==-1)e.on.apply(e,o);else if(t=r.apply(e,o),n.V.isArray(t)&&(a=a.concat(t)),!t._dom_)return t}),d.indexOf(c)!==-1?s:a&&a.length>0?(i._inJectMethods(a),a):s})}),t(s,"get",function(t){var e=this[t];return e&&e.context}),t(s,"eq",function(t){return this[t]}),t(s,"_dom_",function(){return!0}))},i._isDom=function(t){return t instanceof i||t._dom_},n.Dom=n.$=function(t){if(!t)return null;var r;if(n.V.isFunction(t))return n.ready(t);if(!n.V.isString(t)){if(n.V.isWindow(t))r=document;else{if(!n.V.isElement(t))return null;r=t}return new i(r,t)}if(t=n.T.trim(t),"body"==t)r=document.body;else if("document"==t)r=document;else if("html"==t)r=document.querySelector("html");else if("<"==t[0]&&s.test(t))r=i._fragment(t);else if(r=i._qsa(document,t),r&&r.length&&!n.V.isElement(r)&&(r=e.call(r)),!r||0===r.length)return null;if(n.V.isArray(r)&&r.length>0){var o=[];return n.T.each(r,function(e){o.push(new i(e,t))}),i._inJectMethods(o),o}return r?new i(r,t):null}}(SYST),function(t){var e=1,n=2,i=3,s=t.Promise=function(t,n){this.STATE=e,this._fulfils=[],this._rejecteds=[],this.args=[],this.errs=[],this.data=null,this._bunchFulfil=!1,this._bunchReject=!1,this.then(t,n)};t.Promise.prototype={then:function(s,r){return this.STATE===e?(t.V.isFunction(s)&&this._fulfils.push(s),t.V.isFunction(r)&&this._rejecteds.push(r)):this.STATE===n?this.resolve():this.STATE===i&&this.reject(),this},done:function(t){return this.then(t)},success:function(t){return this.done(t)},error:function(t){return this.then(null,t)},resolve:function(t,e){this.STATE=n,t&&(this.data=t,this.args.push(t)),this._bunchFulfil=e!==!1?this._bunchFulfil:e;var i=this._fulfils.shift();if(!i||"function"!=typeof i)throw new TypeError("no found a function object to [then|all|done|success]");this._bunchFulfil?this._fulfils.push(i):(this._bunchFulfil=!1,i.call(this,t,this.args))},reject:function(t,e){this.STATE=i,t&&this.errs.push(t),this._bunchReject=e!==!1?this._bunchReject:e;var n=this._rejecteds.shift();if(!n||"function"!=typeof n)throw new TypeError("no found a function object to [then|catch|error]");this._bunchReject?this._rejecteds.push(n):(this._bunchReject=!1,n.apply(this,this.errs))},all:function(e){if(!t.V.isArray(e))throw new TypeError("args me be a array, queue element is be function");return this._bunchFulfil=!0,this._bunchReject=!0,t.T.each(e,function(e){t.V.isFunction(e)&&e()}),this}},t.P=t.Promise=s}(SYST),function(t){function e(e,n){this.option=t.extend(r,e),this.response=null,this.target=n||this.option.target||this,this.option.type=this.option.type.toUpperCase(),this._init()}function n(n,i,s,r,o,a,c){var h={url:s,data:r,type:n,dataType:i};h=t.extend(h,c||{});var u=new e(h);return u.on("AJAX_SUCCESS",o).on("AJAX_ERROR",a),u.send(),u}function i(n,i,s,r,o,a){if(i=/^#/.test(i)?[document.querySelector(i)]:/^\./.test(i)?document.querySelectorAll(i):null,!i)throw"no found elements";return e.get(s,null,function(e){if(t.T.each(i,function(t){t.innerHTML=e}),"html"==n){var s=document.createElement("div");s.innerHTML=e,e=s}r(e)},function(e,n){t.V.isFunction(o)&&o(e,n)},t.extend(a,{dataType:"text"}))}var s=function(){},r={url:"",data:{},type:"GET",dataType:"json",async:!0,crossDomain:!1,cache:!0,timeout:0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accept:"*/*",headers:{},target:null,before:s,success:s,error:s,complete:s,stop:s};e.prototype={_init:function(){this.xhr=new XMLHttpRequest},_onChangeState:function(){this.readyState=this.xhr.readyState,this.status=this.xhr.status,4==this.readyState&&(this._close(),this.status>=200&&this.status<=300?"arraybuffer"==this.xhr.responseType||"blob"==this.xhr.responseType?(this.response=this.xhr.response,this._onSuccess()):this._formatResponse(this.xhr.responseText):this._onError(this.status?"error":"abort",this.xhr.statusText))},send:function(t){var e=this._toFormData(t||this.option.data),n=this.option.url;"GET"===this.option.type&&(n=this.option.url+(this.option.url.indexOf("?")===-1?"?":"&")+e,n=n.replace(/[\?|\&]$/,"")),this.xhr.open(this.option.type,n,this.option.async,this.option.username,this.option.password),"POST"!==this.option.type&&this.setHeader("Content-Type",this.option.contentType),!this.option.crossDomain&&this.setHeader("X-Requested-With","XMLHttpRequest"),this.setHeaders(this.option.headers||{}),this.setHeader("Accept",this.option.accept),this.option.mimeType&&this.xhr.overrideMimeType&&this.xhr.overrideMimeType(this.option.mimeType),this.option.before.apply(this.target,this._toParameters())!==!1&&(this.xhr.onreadystatechange=this._onChangeState.bind(this),this.xhr.onload=this._onChangeState.bind(this),this.xhr.send(e),this.option.timeout>0&&(this._stim=setTimeout(function(){this.off("timeout")}.bind(this),this.option.timeout)))},on:function(t,e){switch(t=t.toUpperCase(),e=e||s,t){case"AJAX_BEFORE":this.option.before=e;break;case"AJAX_SUCCESS":this.option.success=e;break;case"AJAX_ERROR":this.option.error=e;break;case"AJAX_COMPLETE":this.option.complete=e}return this},off:function(e,n){return"abort"!==e&&"timeout"!==e||(this._close(),this.xhr.abort(),this._onError(e)),n&&(this.option.stop=n),t.V.isFunction(this.option.stop)||this.option.stop.apply(this.target,[this.xhr,"stop"]),this},setHeader:function(t,e){this.xhr.setRequestHeader(t,e)},setHeaders:function(e){t.T.each(e,function(t,e,n){this.setHeader(n,t)},this)},_close:function(){this._stim&&(clearTimeout(this._stim),this._stim=null),this.xhr.onload=this.xhr.onerror=this.xhr.onreadystatechange=null},_toParameters:function(t){return[this.response,this.xhr,t]},_toFormData:function(e){if(t.V.isString(e))return e;var n;return"POST"===this.option.type&&window.FormData?(n=new window.FormData,t.T.each(e,function(t,e,i){n.append(i,t)},this)):n=t.T.serialize(e),n},_formatResponse:function(t){var e,n=t,i=this.option.dataType||function(t){return t.split(";")[0].split("/")[1]}(this.xhr.getResponseHeader("content-Type")),s=new DOMParser;if("xml"==i)n=s.parseFromString(t,"text/xml");else if("html"==i)n=s.parseFromString(t,"text/html");else if("json"==i)try{n=JSON.parse(t)}catch(r){e=r}this.response=n,e?this._onError("parseError"):this._onSuccess()},_onSuccess:function(){this.option.success.apply(this.target,this._toParameters("success")),this._onComplete("success")},_onError:function(t,e){t=t||"error",this.option.error.apply(this.target,[this.xhr,t,e]),this._onComplete(t)},_onComplete:function(t){this.option.complete.apply(this.target,[this.xhr,t||"error"])}},e.ajax=function(n,i){i=i||{},t.V.isString(n)?i.url=n:(i=n,n=void 0);var s=new e(i);return s.send(),s},e.post=function(t,e,i,s,r){return n("POST",null,t,e,i,s,r)},e.get=function(t,e,i,s,r){return n("GET",null,t,e,i,s,r)},e.getJSON=function(t,e,i,s,r){return n("GET","json",t,e,i,s,r)},e.load=function(t,e,n,s,r){return i("text",t,e,n,s,r)},e.loadHTML=function(t,e,n,s,r){return i("html",t,e,n,s,r)},e.fetch=function(n,i,s){i=i||{};var r=(i.headers||{},(i.method||"post").toUpperCase()),o=i.body;if(!1 in window){var a=new t.Promise,c=t.extend(i,{url:n,data:o,type:r,dataType:s,success:function(t){a.resolve(t)},error:function(t){a.reject(t)}});return e.ajax(c),a}return"GET"==r||"HEAD"==r?(t.V.isObject(o)?n+=t.T.paramData(o,!0):t.V.isString(o)&&(n+="?"+o),i.body=null,delete i.body):t.V.isObject(o)&&(i.body=JSON.stringify(o)),window.fetch(n,i).then(function(e){return t.V.isFunction(e[s])?e[s]():null})},t.Ajax=t.S=e}(SYST),function(t){t.httpConfig={};var e=function(){this.__instance_SYST__="SYST Http",this.__name__="SYST Http"};t.Http=t.Request=function(){var n=t.extendClass(arguments,e);return n._initialize(),n};var n=t.Ajax;e.prototype={_initialize:function(){this.init&&this.init.apply(this)},ajax:n.ajax,get:n.get,getJSON:n.getJSON,post:n.post,doRequest:function(e,n,i,s,r){function o(){var e;return t.V.isFunction(_)&&(e=_.apply(f,arguments)),e}function a(){var e;return t.V.isFunction(g)&&(e=g.apply(f,arguments)),e}function c(){t.V.isFunction(p)&&p.call(f);var e;return t.V.isFunction(y)&&(e=y.apply(f,arguments)),e}var h,u,l,p,f,d={};if(n&&t.V.isObject(n)&&e){h=this.type||t.httpConfig.type||"GET",u=this.dataType||t.httpConfig.dataType||"json",l=this.commonData||t.httpConfig.commonData||{},f=this.target||this;var m=this.ajaxBefore||t.httpConfig.ajaxBefore,_=this.ajaxSuccess||t.httpConfig.ajaxSuccess,g=this.ajaxError||t.httpConfig.ajaxError,v=this.ajaxComplete||t.httpConfig.ajaxComplete,y=this.ajaxEnd||t.httpConfig.ajaxEnd;t.V.isObject(r)&&(d=r,p=r.commonHandler,f=r.callTarget||this);var T=t.extend({url:e,type:h,data:t.extend(n,l),dataType:u,before:m,success:function(){c(arguments);var e=o.apply(f,arguments);e!==!1&&t.V.isFunction(i)&&i.apply(f,arguments)},error:function(){c(arguments);var e=a.apply(f,arguments);e!==!1&&t.V.isFunction(s)&&s.apply(f,arguments)},complete:v},d);this.ajax(T)}},doAjax:function(t,e,n,i,s){this.doRequest(t,e,n,i,s)},load:n.load,loadHTML:n.loadHTML,fetch:n.fetch,socket:function(t,e){if(!1 in window)throw new ReferenceError("WebSocket api is not support!");return new WebSocket(t,e)},generateApi:function(e,n){t.V.isObject(e)&&t.T.each(e,function(t,e,i){this._generateApi(i,t,n)},this)},_generateApi:function(e,n,i){function s(e,s,r,o,a){i=t.extend(i,o||{}),i.callTarget=a||this.target||i.callTarget||this,this.doAjax(n,e,s,r,i)}var r=this;i=t.V.isObject(i)&&i||{},"defineProperty"in Object?Object.defineProperty(r,e,{value:s.bind(this)}):r[e]=s}}}(SYST),function(t){function e(e,n){var i=e.toString();return i=i.replace(c,function(t){return/^\/{2,}/.test(t)||/^\/\*/.test(t)?"":t}),!g.test(i)&&e.name||(i=i.replace(g,function(e,i){var s=!t.T.trim(i)&&n;return"var "+s+" = function "+s+"("})),i+=".bind(this);"}t.tplConfig={open:"<%",close:"%>"};var n,i,s,r=/\\|\'|\r|\n|\u2028|\u2029/g,o="([\\s\\S]+?)",a=/^=+\s*|\s*$/gi,c=/("([^\\\"]*(\\.)?)*")|('([^\\\']*(\\.)?)*')|(\/{2,}.*?(\r|\n|$))|(\/\*(\n|.)*?\*\/)/g,h=t.tplConfig.open,u=t.tplConfig.close,l={},p={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},f=function(t){return"\\"+p[t]},d=function(t){for(var e=[],n=Object.keys(t),i=0;i<n.length;++i)e.push(t[n[i]].source);return e.join("|").replace(/|$/i,"")},m=function(e){e=e||t.tplConfig,h=e.open||t.tplConfig.open,u=e.close||t.tplConfig.close,n={execter:new RegExp(h+o+u,"g"),exporter:new RegExp(h+"\\s*="+o+u,"g"),escaper:new RegExp(h+"\\s*=="+o+u,"g")},i=new RegExp(d(n),"g")},_=/^include\(\s*([^,]+?)\s*,\s*([^,]+?)\s*\)/i,g=/^function([^\(]+?)\(/i,v=function(e,n,o,c){var p=[],d=[],m='var $_H=$h,$_D=$d,_s="";for(var n in $_D){eval("var "+n+"=$_D[\'"+n+"\'];");} if($_H && SYST.V.isObject($_H)){ for(var h in $_H){ eval("var "+h+"=$_H[\'"+h+"\'];"); } }',g=0;if(m="var each = SYST.T.each;"+m,e=[h,"if(true){",u,e,h,"}",u].join(""),e.replace(i,function(n,i,s,o,a){var c=e.slice(g,a).replace(r,f);return c=c&&""!=c?"_s+='"+c+"';":"",g=a+n.length,d.push(c),p.push(t.T.trim(i)),n}),0===p.length)return e;for(var v,y,T=0;T<p.length;++T){if(v=p[T],y=d[T+1],/^\s*={2}/i.test(v)||/^\s*=>/i.test(v))v=v.replace(a,""),v="if(null !=("+v+")){_s+=(SYST.T.escapeHtml("+v+'));}else{ _s+="";}';else if(/^=[^=]+?/i.test(v))v=v.replace(a,""),v="if(null !=("+v+")){_s+=("+v+');}else{_s+="";}';else if(_.test(v)){
var b;v.replace(_,function(e,n,i){n&&""!==n&&(b=setInterval(function(){t.$(i)[0]&&(clearInterval(b),t.$(i).load(n))},1e3/60))}),v=""}m+=(v||"")+(y||"")}m=""+m+"return _s;";var x=new Function("$d","$h",m);return l[s]=x,x.call(c||this,n,o)},y=function(e,i,r,o,a){if(null==e)throw new SyntaxError("no found template content(string or node)");var c,h,u,p="";if(s=e,l[s])return u=l[s],u.call(a||this,i,r);if(m(o),/[<|>|\/]/gi.test(e)||n.execter.test(e))p=t.T.trim(e);else if(t.V.isElement(e)?c=e:t.V.isString(e)&&(h=e.replace(/^#/i,""),c=document.getElementById(h)),c){var f=/^(TEXTEREA|INPUT)$/i.test(c.nodeName)?c.value:c.innerHTML||c.textContent;p=t.T.trim(f)}return p?v(p,i,r,a):""};y.getFnSourceCode=e,y.template=v,t.Render=y,t.T.render=y}(SYST),function(t){function e(e,n,r,o,a){if(!n)throw new ReferenceError("Event name is must");var o=o||"on";if(e||(e=window),s(e.selector))"on"==o?t.Dom(window).off().on(n,r):t.Dom(window).off(n,r);else if(i(e.selector))"on"==o?t.Dom(e.selector).off().on(n,r):t.Dom(e.selector).off(n,r);else{var c=t.Dom(a||"body");t.V.isArray(c)?t.T.each(c,function(t){"on"==o?t.undelegate(e.selector,n,r).delegate(e.selector,n,r):t.undelegate(e.selector,n,r)}):"on"==o?c.undelegate(e.selector,n,r).delegate(e.selector,n,r):c.undelegate(e.selector,n,r)}}function n(n,i,s,r,o){n&&(t.V.isArray(n)?t.T.each(n,function(t){e(t,i,s,r,o)},this):e(n,i,s,r,o))}function i(t){return t==document||"document"==t||"html"==t||"body"==t}function s(t){return t==window||"window"==t}var r=function(t,e,i,s,r){n(t,e,i,s,r)};r.initEvent=function(t,e,i,s,r){n(t,e,i,s,r)},r.cache={},r._cache={},t.Events=r}(SYST),function(e){var n=function(e,n){this.value=e,this.type="none",this.name=null,this.oldValue=null,this.object=this.value,this.changer={type:"none",name:null,oldValue:null,newValue:null,object:this.value,target:this,tier:""},this.target=n,!this.__ob__&&(this.__ob__=this),t(this.value,"__ob__",this),this.bindNodes=[],this._init()};n.prototype={onWatch:function(t){this.callback=t},_init:function(){this._setOldValue(this.value)},_defineded:function(t,n,i){var s=this,r=Object.getOwnPropertyDescriptor(t,n);if(r&&r.configurable===!1)return!1;var o=r&&r.get;Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:function(){var t=o?o.call(this):s._oldValue[n];return e.V.isArray(t)&&(t.__ob__||(s._inJectMethods(t,n),t.__ob__=s)),t},set:function(t){var e=i||s._oldValue[n];t===e?s._setChanger("none",n,t):(s._setChanger("update",n,t,e),s._oldValue[n]=t)}})},addNode:function(t){this.bindNodes.push(t)},added:function(t,e){this._setChanger("add",t,e)},deleted:function(t){this._setChanger("delete",t)},update:function(t,e){this._setChanger("update",t,e)},none:function(t,e){this._setChanger("none",t,e)},_setChanger:function(t,n,i,s){this.changer.type=t,this.changer.name=n,this.changer.oldValue=s,this.changer.newValue=i,this.changer.tier=this.value.__tier__||this.value[n].__tier__||"",e.T.indexOf(["add","update"],t)>-1&&e.Observe(i,this.callback,this.target),this._callback()},_callback:function(){var t=e.V.isFunction(this.callback)?this.callback:function(){};t.call(this.target||this,this.changer)},_setOldValue:function(t){if(this._oldValue={},e.V.isObject(t))for(var n in t)this._oldValue[n]=t[n],this._defineded(this.value,n);else e.V.isArray(t)&&this._inJectMethods(t,this.tier||t.__tier__)},_inJectMethods:function(n,i){var s=this,r=Array.prototype,o=["pop","shift","unshift","push","splice","sort","reverse"];return t(n,"update",function(){s.target.props[i]=this}),e.T.each(o,function(e){t(n,e,function(){var t=r.slice.call(arguments),i=r[e].apply(n,t);return this.update(),i})},this),t(n,"getIndex",function(t,e){for(var n=0,i=this.length;n<i;++n)if(t==this[n][e])return n;return-1}),t(n,"set",function(t,e){this[t]=e,this.update()}),t(n,"query",function(t,n){if(e.V.isNumber(t)&&!n)return this[t];var i=-1;return e.T.each(this,function(e,s){t==e[n]&&(i=s)}),i>-1?this[i]:null}),t(n,"insert",function(t,n){if(e.V.isNumber(t)){var i=[t,0].concat(r.slice.call(arguments,1));this.splice.apply(this,i)}else this.unshift(t);return this}),t(n,"remove",function(t,n){if(e.V.isNumber(t))return this.splice.apply(this,[t,n||1]);var i=-1;return n?e.T.each(this,function(e,s,r){t[n]==e[n]&&(i=s)}):i=e.T.indexOf(this,t),i>-1&&this.splice.apply(this,[i,1]),this}),n}},e.Observe=function(i,s,r,o){function a(t,e){c(t,e);var i=new n(t,r||t);i.onWatch(s)}function c(e,n){t(e,"__tier__",n)}i&&i.__ob__||(e.V.isObject(i)||e.V.isArray(i))&&a(i,o)}}(SYST),!function(t){var e=t.$,n=t.T.each,i=/\{\{\s*=*?\s*([^\{]*?)\s*\}\}/gi,s=function(t){return new RegExp(i.source,t||"gi")},r=t.N.UA.indexOf("msie 9.0")>0,o=/^[^\w]*/gi,a=/\s*[,\|\/\\-_]\s*/gi,c=/\s*\|\s*/gi,h=function(){return/\$(value|item|key|first|last|index)/gi},u={open:"{{",close:"}}"},l=50,p={enter:13,shift:16,tab:9,esc:27,up:38,down:40,left:37,right:39,blackSpace:32,capsLook:20},f=function(t){return t&&""!=t},d=function(e){return t.T.rtrim((e||"").replace(/[\s\{\}]*/gi,""),"|")},m=function(t){return!!/TEMPLATE|SCRIPT|STYLE/i.test(t.tagName)},_="st-model",g="st-prop",v="st-template",y="st-style",T="st-for",b="st-option",x="st-if",S="st-else",E="st-show",w="st-hide",A="st-on",V="st-index",N=function(t){if(!t)throw new ReferenceError("args 1 can ben SYST.Model");this._reset(t)};N.prototype={init:function(){this._init()},addListener:function(t,e){this._getModelTags(t),e&&this.model.set(t,e)},removeListener:function(t){return t?(this._deleteBinds(t),this):this.removeListenerAll()},removeListenerAll:function(){return this._reset(),this},add:function(t,e){n(this.bindModelTags,function(e){m(e)||(e.removeAttribute(_),this._getBindNodes(e,t))},this),this.update(t,e)},update:function(e,n){!t.V.isEmpty(e)&&t.V.isString(e)&&(n&&(this.model._props[e]=n),this._createVM(),this.updateBindTextAndAttrNodes(e),this.updaateBindDisplay(e),this.updateBindProps(e),this.updateBindStyles(e),this.updateBindRepeats(e),this.updateRenderTemplate()),this._removeStLockNodes()},reset:function(t){this._reset(t),this._getModelTags()},updateBindTextAndAttrNodes:function(t){this._makeBindTextNodes(t),this._makeBindAttrNodes(t)},updateBindProps:function(t){t&&!this.bindElements[t]||this._makeProps(t)},updateRenderTemplate:function(t,e){this._makeBindTemplates(t,e)},updateBindStyles:function(t){t&&!this.bindStyles[t]||this._makeStyles(t)},updateBindRepeats:function(t){t&&!this.bindRepeats[t]||this._makeRepeats(t)},updaateBindDisplay:function(t){this._makeDisplays(t)},updateBindEvents:function(){this._makeBindEvents()},_init:function(){return this.model._props?void this._getModelTags():this},_reset:function(t){this.model=t||this.model,this._createVM(),this.bindModelTags=[],this.bindTextNodes=[],this.bindAttrNodes=[],this.bindElements={},this.bindTemplates={},this.bindStyles={},this.bindRepeats={},this.bindDisplayNodes={"st-if":{},"st-else":{},"st-show":{},"st-hide":{}}},_createVM:function(){this.vm=Object.create(this.model)},_deleteBinds:function(t){var e=[this.bindElements,this.bindTemplates,this.bindRepeats,this.bindStyles];!function(e){n(e,function(e){e[t]=null,delete e[t]})}(e)},_getModelTags:function(t){var e=this.vm.tags,i=this.vm.$mid,s="#"===i[0],r="."===i[0];this.bindModelTags=e.length>0?e:function(){return s||r?document.querySelectorAll(i):document.querySelectorAll("["+_+"="+i+"]")}(),n(this.bindModelTags,function(e){m(e)||(e.removeAttribute(_),this._getBindAction(e),this._getBindNodes(e,t))},this),this._makeBindTextNodes(t),this._makeBindAttrNodes(t),this._makeDisplays(t),this._removeStLockNodes()},_getBindNodes:function(e,n){if(3!==e.nodeType||""!==t.T.trim(e.textContent)){var i=e.childNodes;if(this._getAttr(e,T))return this._getBindRepeats(e,n),this._isSelectTag(e)&&this._getAttr(e,g)&&this._getBindElements(e),this._getBindAction(e),this;if(this._getAttr(e,b))return this._getBindAction(e),this;if(i.length>0){for(var s=0;s<i.length;++s)if(!this._getAttr(e,_)&&8!==i[s].nodeType){if(this._getAttr(e,v)||m(e))break;if(this._getAttr(e,T))break;this._getBindAction(e),this._getBindElements(e),this._getBindNodes(i[s])}}else this._getBindAction(e),this._getBindTextNodes(e),this._getBindElements(e),this._getBindTemplates(e)}},_getBindAction:function(t){this._getBindAttrNodes(t),this._getBindStyles(t),this._getBindDisplays(t),this._getBindEvents(t)},_removeStLockNodes:function(){var t=e("[st-lock]");t&&t.length>0&&n(t,function(t){t.removeAttr("st-lock"),t.show()})},_getBindTextNodes:function(e){var n=e.nodeType,i=e.parentNode,r=t.T.trim(e.textContent);3===n&&(i&&(i.getAttribute(T)||i.ve&&i.ve.getAttribute(T))||3===n&&r&&s().test(r)&&!h().test(r)&&(this._cloneVeNode(e),e.ve.raw=r.substr(0),this._toBindTextNodes(e)))},_toBindTextNodes:function(e){t.T.indexOf(this.bindTextNodes,e)===-1&&this.bindTextNodes.push(e)},_makeBindTextNodes:function(t,e){var i=e||this.bindTextNodes;(!t||i&&0!==!i.length)&&n(i,function(e){this._renderBindText(t,e)},this)},_renderBindText:function(e,n){var i,s,r,o=n.ve,a=o.raw,c=this._getRenderTemplate(a);i=c.template,r=this._mergeHelpers(c.helpers),s=t.T.render(i,this.vm.props,r,u,this.vm),n.textContent=s},_getBindAttrNodes:function(t){if(1===t.nodeType){var e=t.attributes;e.length>0&&n(e,function(e){var n=e.textContent;s().test(n)&&!h().test(n)&&e.nodeName!==y&&(t.ve||(e.ve=e.cloneNode(),e.ve.raw=n.substr(0)),this._toBindAttrNode(e))},this)}},_toBindAttrNode:function(e){t.T.indexOf(this.bindAttrNodes,e)===-1&&this.bindAttrNodes.push(e)},_makeBindAttrNodes:function(t,e){var i=e||this.bindAttrNodes;(!t||i&&0!==!i.length)&&n(i,function(e){this._renderBindText(t,e)},this)},_getBindElements:function(t){if(!(1!==t.nodeType||!this._getAttr(t,g)||m(t)||this._getAttr(t,v)||this._getAttr(t,T)&&!this._isSelectTag(t))){var e=this._getRootPropName(t.getAttribute(g));this._cloneVeNode(t),this._toBindElements(e,t),this._makeProps(e)}},_toBindElements:function(e,n){n.removeAttribute(g),t.V.isArray(this.bindElements[e])?t.T.indexOf(this.bindElements[e],n)===-1&&this.bindElements[e].push(n):(this.bindElements[e]=[],this.bindElements[e].push(n))},_makeProps:function(e){var i=this._getBinds(e,this.bindElements);e&&!i[e]||n(i,function(e,i,s){var r=e||this.bindElements[s];t.V.isArray(r)&&0!==r.length&&n(r,function(t){this._makeProp(s,t)},this)},this)},_makeProp:function(n,s){function o(t,e,i){!p&&(p=setTimeout(function(){var s=d._makeHelpers(t.value,i);"checkbox"==t.type?h(e,s,t.checked):(d.model.set(e,s),t.value=d._getProp(m)),d.updateBindTextAndAttrNodes(n)},l))}function c(e,n){u?t.V.isArray(n)?e.checked=n.indexOf(e.value)!==-1:(n=n.split(a),c(e,n)):e.checked=!1}function h(e,n,i){var s=d.vm.get(e);t.V.isString(s)?s=s.split(a).filter(function(e){return e&&""!==t.T.trim(e)}):t.V.isArray(s)||(s=[]),i?s.indexOf(n)===-1&&n.length>0&&s.push(n):s=t.T.arrRemove(s,n),d.model.set(e,s)}if(n in this.vm._props){var u,p,f,d=this,m=s.ve,_=e(s),v=m.getAttribute(g),y=this._getPropName(v),b=!1;if(f=this._getHelperAsString(v),u=this._getProp(m),/TEXTAREA|INPUT|SELECT/.test(s.tagName)){if(_.on("change",function(){o(s,y,f)}),/RADIO/i.test(s.type))return s.value==u&&(s.checked=!0),!1;if(/CHECKBOX/i.test(s.type))return c(s,u),!1;s.value=u,m.setAttribute("value",u),/TEXTAREA|INPUT/.test(s.tagName)&&(_.on("compositionstart",function(){b=!0}).on("compositionend",function(){b=!1}).on("input",function(){b||o(s,y,f)}),r&&_.on("cut",function(){o(s,y,f)}))}else{if(_.attr(T))return;v=m.getAttribute(g),v||!m.raw?_.html(d._getProp(m)):s.outerHTML=m.raw.replace(i,function(t,e){return d._getProp(m,e)})}}},_getProp:function(e,n){var i,s,r,a=n||(e.getAttribute(g)||"").replace(o,"");return a?(s=this._getHelperAsString(a),i=this._getPropName(a),r=/\./gi.test(i)?this._getFinalPropValue(i):this.vm.get(i),null==r?"":(t.V.isFunction(r)&&(r=r.apply(this.vm)),r=this._makeHelpers(r,s))):""},_getRootPropName:function(t){return d(t).split(/\.|\|/gi)[0]},_getPropName:function(t){return d(t).split("|")[0]},_getBindTemplates:function(t){if(1===t.nodeType&&this._getAttr(t,v)){var e,n;this._cloneVeNode(t),e="#"+t.getAttribute(v),n=t.getAttribute(g),t.ve._bindProp=n,t.ve._bindTemplateId=e,this._toBindTemplates(e,t),this._makeBindTemplates(e)}},_toBindTemplates:function(e,n){n.removeAttribute(g),n.removeAttribute(v),this.bindTemplates[e]||(this.bindTemplates[e]=[]),t.T.indexOf(this.bindTemplates[e],n)===-1&&this.bindTemplates[e].push(n)},_makeBindTemplates:function(t,e){var i=this._getBinds(t,this.bindTemplates);Object.keys(i).length>0&&n(i,function(t,i,s){t&&t.length>0&&n(t,function(t){this._renderTemplate(s,t,e)},this)},this)},_renderTemplate:function(e,n,i){if(n){var s=n.ve._bindProp;if(!this.vm._props||0!==Object.keys(this.vm._props).length){var r;if(s){r=this.vm.get(s)||{},t.V.isObject(r)&&t.V.isObject(i)&&(r=t.extend(r,i));var o={};o[s]=r,r=o}else r=this.vm._props;n.innerHTML=t.T.render(e,r,null,u,this.vm)}}},_getBindStyles:function(t){var e,n,i=s();if(1===t.nodeType&&this._getAttr(t,y))for(e=t.getAttribute(y);null!=(n=i.exec(e));){this._cloneVeNode(t),t.ve[y]=e;var r=this._getPropName(n[1]);this.vm.hasProp(r)||this.model.add(r,null,!0),this._toBindStyles(r,t),this._makeStyles(r)}},_toBindStyles:function(e,n){n.removeAttribute(y);var i=this.bindStyles[e];i||(i=this.bindStyles[e]=[]),t.T.indexOf(i,n)===-1&&i.push(n)},_makeStyles:function(t){var e=this._getBinds(t,this.bindStyles);n(e,function(t,e,n){this._makeStyle(n,t)},this)},_makeStyle:function(e,i){if(e in this.vm._props){var s,r,o;i=i||this.bindStyles[e],t.V.isArray(i)&&n(i,function(e){o=this._getRenderTemplate(e.ve[y]),s=o.template,r=this._mergeHelpers(o.helpers),s=t.T.render(s,this.vm._props,r,u,this.vm),this._setStyles(e,s)},this)}},_setStyles:function(e,i){i&&(i=i.replace(/\s*(\:|;)\s*/gi,"$1").split(";"),i&&t.V.isArray(i)&&n(i,function(n){var i=t.T.trim(n).split(":");i&&(e.style[i[0]]=i[1])}))},_getBindRepeats:function(e){if(1===e.nodeType&&this._getAttr(e,T)){e.ve||(e.ve=e.cloneNode(!0));var n,i,s=e.getAttribute(T),r=t.T.trim(s),o=r.split(/\s+(in|as|of)\s+/gi).map(function(t){return t.trim()});n=o.length>1?this._getRootPropName(o[2]):this._getRootPropName(o[0]),i=this._getHelperAsString(s),e.ve.helpers=i,e.ve._parent_=e.parentNode,i&&i.length>0&&(this.vm._props[n]=this._makeHelpers(this.vm.get(n),i)),this._toBindRepeats(n,e),this._makeRepeats(n),this._getBindNodes(e,n)}},_toBindRepeats:function(e,n){n.removeAttribute(T),n.removeAttribute(V);var i=this.bindRepeats[e];i||(this.bindRepeats[e]=[],i=this.bindRepeats[e]),t.T.indexOf(i,n)===-1&&i.push(n)},_makeRepeats:function(t){var e=this._getBinds(t,this.bindRepeats);n(e,function(t,e,n){t&&this._makeRepeat(n,t)},this)},_makeRepeat:function(t,i){if(this.vm.hasProp(t)&&i&&0!==i.length){var s;n(i,function(i){s=e(i),s.html(this._renderBindRepeats(i,t));var r=s.find("[st-style]");r.length>0&&n(r,function(t){var e=t.attr(y);t.removeAttr(y),e&&this._setStyles(t.context,e)},this);var o=s.find("[st-on]");o.length>0&&n(o,function(t){this._getBindEvents(t.context)},this)},this)}},_renderBindRepeats:function(e){var n,i,s=this._getBindRepeatsRenderTpl(e);return n=s.template||"",i=this._mergeHelpers(s.helpers),n=this._formatOn(n,!0),t.T.render(n,this.vm._props,i,u,this.vm)},_getBindRepeatsRenderTpl:function(i){function s(n){var i,s,r,o=e(n.context.ve||n.context),a=o.attr(T),h=o.attr(V),u=t.T.trim(a),l=u.split(/\s+(in|of|as)\s+/gi).map(t.T.trim);l.length>1?(r=l[0],s=l[2]):s=l[0];var p=o.helpers||this._getHelperAsString(a);p&&p.length>0&&(c=t.extend(c,this._getHelperToRender(p))),i="{{ each("+s+" || [], function(_item_, i, key){ var ",i+=(r?r+"=":"")+"_item_, ",i+=(h?h:"$index")+"=i, ",i+="$item=_item_, $value=_item_, $key=key, ",i+="$length = "+s+".length, $first = (i == 0 ? true : false), $last = (i == $length - 1 ? true : false); }}";var f=document.createTextNode(i);n.prepend(f)}function r(t){var e=document.createTextNode("{{ }, this); }}");t.append(e)}var o,a=e(i.ve),c={},h=a.clone(!0);h.context.ve=a,o=h.context.outerHTML;var u=this._getRenderTemplate(o),l=t.$(u.template);c=u.helpers;var p=t.$(document.createDocumentFragment());p.append(l);var f=p.find("[st-for]");return n(f,function(t){s.call(this,t),r.call(this,t)},this),{template:p.children().eq(0).html(),helpers:c}},_getBindDisplays:function(t){function e(e){if(3===t.nodeType||!n._getAttr(t,e))return!1;var i=t.getAttribute(e),s=n._getPropName(i);n._cloneVeNode(t),n._toBindDisplays(e,s,t)}var n=this;e(E),e(w),e(x),e(S)},_toBindDisplays:function(e,n,i){i.removeAttribute(e);var s=this.bindDisplayNodes[e][n];s||(this.bindDisplayNodes[e][n]=[],s=this.bindDisplayNodes[e][n]),t.T.indexOf(s,i)===-1&&s.push(i)},_makeDisplays:function(t){var e;e=this._getBinds(t,this.bindDisplayNodes[E]),e&&n(e,function(t,e,n){this._makeDisplay(n,t,E)},this),e=this._getBinds(t,this.bindDisplayNodes[x]),e&&n(e,function(t,e,n){this._makeDisplay(n,t,x)},this)},_makeDisplay:function(i,s,r){function o(e){var n=this.bindDisplayNodes[e][i];return n&&t.V.isArray(n)&&n.length>0?n:null}if(r=r||E,s&&0!==s.length){var a=this.vm.get(i);n(s,function(t){var i,s=t.ve,c=this._getAttr(s,r),h=o.call(this,w),u=o.call(this,S),l=e(t);/^[^\|]+?\|/.test(c)&&(i=this._getHelperAsString(c),a=this._makeHelpers(a,i)),a?r===E?(l.show(),h&&n(h,function(t){e(t).hide()},this)):u&&n(u,function(t){e(t).remove()},this):r===E?(l.hide(),h&&n(h,function(t){e(t).show()},this)):l.remove()},this)}},_getBindEvents:function(t){if(!(1!==t.nodeType||t.ve&&t.ve.getAttribute(T))){var e=this._getAttr(t,A);e&&(e=this._formatOn(e),t._stOn=this._getFormatEvents(t,e),t.removeAttribute(A),this._makeBindEvents(t))}},_makeBindEvents:function(i){var s=i._stOn,r=e(i);s.length>0&&n(s,function(e){var n,s=this.vm[e.callback],o=e.type;e.args[0];if(!t.V.isFunction(s))throw new ReferenceError("this model has not event: "+e.callback);n=t.T.proxy(this.vm,s),r.off(o,n).on(o,function(t){t.$data=e.args,this._isHit(t,e,n)}.bind(this),e.args,i,null,null,!0)},this)},_cloneVeNode:function(t){!t.ve&&(t.ve=t.cloneNode(!0)),!t.ve.raw&&(t.ve.raw=t.outerHTML)},_getBinds:function(e,n){var i={};return e?i[e]=n[e]:i=n,t.V.isArray(i)&&(i=t.T.arr2object(i,e)),i},_getFinalPropValue:function(e){for(var n,i=e.split("."),s=0,r=this.vm._props[i[0].replace(o,"")]||"";t.V.isObject(r)&&null!=(n=r[i[++s]]);)r=r[i[s]];return r},_getAttr:function(t,e){return t.attributes&&t.hasAttribute(e)?t.getAttribute(e):null},_getHelperAsString:function(e,i){if(e&&0!==e.length){var s=e.split(c),r=[];if(s&&0!==!s.length){if(i||(i=s[0],s.shift()),0===s.length)return r;var o=/\(\s*([^\)]*?)\s*\)/i;return n(s,function(e){if(o.test(e)){if(/\./g.test(e))return e;var n=[];e=e.replace(o,function(e,i){return i=t.T.trim(i),(void 0!==i||0!==i.length)&&n.push(i.replace(/"'/gi,"")),""}),r.push({fnName:e,fnParams:n})}else r.push({fnName:e,fnParams:null})}),r}}},_getHelperToRender:function(e){if(!t.V.isArray(e)||0===Object.keys(e).length)return!1;var i,s={};return n(e,function(t){i=t.fnName,/\./.test(i)||(s[i]=this.vm.helpers[i]||this.vm[i]||null)},this),s},_makeHelperToExpress:function(t,e){var i="";return n(t,function(t,n){var s=t.fnName,r=t.fnParams,o=r?", ":"";0===n&&(r?(r.unshift(e),o=""):o=e),i=/\./.test(s)?s+"("+i+o+(r?r.join(", "):"")+")":s+".call(this,"+i+o+(r?r.join(", "):"")+")"}),i},_makeHelpers:function(e,i){if(!t.V.isArray(i)||0===i.length)return e;var s,r=e;return n(i,function(e){var n=t.T.trim(e.fnName),i=e.fnParams;s=this.vm.helpers[n]||this.vm[n],i?i.unshift(r):i=[r],t.V.isFunction(s)?r=s.apply(this.vm,i):(s=t.T[n.replace(/\s*SYST\.T\.\s*/gi,"")],t.V.isFunction(s)&&(r=s(i)))},this),r},_makeRender:function(e,n,i){return t.T.render(e,n||this.vm._props,i||this.vm.helpers,u)||""},_getRenderTemplate:function(e){var n,s=e||"",r={};return s=s.replace(i,function(e,i){if(/^[^\|]+?\|/.test(i)){var s=this._getPropName(i);n=this._getHelperAsString(i),r=t.extend(r,this._getHelperToRender(n)),i=this._makeHelperToExpress(n,s)}var o="{{= "+i+" }}";return/^\{\{\s*=+/i.test(e)&&(o="{{== "+i+" }}"),o}.bind(this)),{template:s,helpers:r}},_formatOn:function(t,e){if(!t)return"";var n=e?/st-on="([^\"]+?)"/g:/"([^\"]+?)"/g;return t=t.replace(n,function(t,e){return e=e.replace(/\(([^\)]+?)\)/g,function(t,e){var n=e.split(/\s*,\s*/g).filter(f);return n=n.map(function(t){return"{{= SYST.T.json.stringify("+t+") }}"}).join(" ,&, "),"("+n+")"}),'st-on="'+e+'"'})},_getFormatEvents:function(e,i){function s(e){var n=" ,&, ";return e.indexOf(n)>0?e.split(n).map(t.T.json.parse):[t.T.json.parse(e)]}if(i){var r={},o=[],a=i.replace(/^[\{\s]*|[\s\}]*$/g,"").split(/\s*;\s*/g).filter(f);a&&n(a,function(t){t=t.split(/\s*:\s+/),t&&2===t.length&&(r[t[0]]=t[1])});var c=/^[^\(]*?\(|\)$/g;return n(r,function(e,i,r){r=r.split("|").filter(f),n(r,function(n){var i={};o.push(i),n=n.split("@"),n&&(n=n.filter(f).map(t.T.trim)),i.type=n.splice(0,1)[0],i.keymap=n;var r=e.split(/\(/g);i.callback=r[0],i.args=c.test(e)?s(e.replace(/^[^\(]*?\(|\)$/g,"")):[]})}),o}},_createFrame:function(n){var i=document.createDocumentFragment();return t.V.isElement(n)&&i.appendChild(n),e(i)},_mergeHelpers:function(e){return t.extend(this.vm.helpers||{},e)},_isSelectTag:function(t){return/^SELECT$/i.test(t.tagName)},_isHit:function(t,e,n){var i,s=[],r=Object.keys(p);e.args.forEach(function(t){s.push(t)}),s.unshift(t);for(var o=0,a=r.length;o<a;++o){if(i=r[o],!(/^key/i.test(t.type)&&e.keymap.length>0))return n.apply(this,s),!0;if(e.keymap.indexOf(i)>-1&&t.keyCode===p[i])return n.apply(this,s),!0}return!1}},t.Watcher=N}(SYST),function(t,n){var i=function(){this.__instance_SYST__="SYST Model",this.__name__="SYST Model",this.autoWatcher=!0,this.watcher=null,this.components=[]};t.Model=function(){var n,s=e.call(arguments),r=s[0],o=t.V.isString(r);return o&&s.splice(0,1),n=t.extendClass(s,i),o&&(n.$mid=r),n._initialize(),n},i.prototype={_initialize:function(){this.$http=this.$http||new t.Http,this._props={},this.helpers=t.V.isFunction(this.helpers)?this.helpers.apply(this):this.helpers||{},t.V.isObject(this.helpers)&&t.T.each(this.helpers,function(t,e,n){this.helpers[n]=t.bind(this)},this),this.props=t.V.isFunction(this.props)?this.props.apply(this):this.props||{},this._props=t.clone(this.props),this.props={},this._$proxyProps(),Object.defineProperty(this.props,"$M",{value:t.shareModel,enumerable:!0,writable:!0,configurable:!1}),this.components&&this.components.length>0,this._getTags(),this.watcher=new t.Watcher(this),this.init&&this.init.apply(this,arguments),t.shareModel.add(this.$mid||null,this),this.$mid&&this.autoWatcher!==!1&&this.watcher.init()},$:t.$,get:function(t){return this._props[t]},set:function(e,n,i){function s(t,e){this.has(t)?(this._props[t]=e,!i&&this._watchProp(t,e)):(this._props[t]=e,this._$proxyProp(this.props,t),!i&&this._watchAddProp(t,e))}if(t.V.isEmpty(e))return this;if(t.V.isObject(e))for(var r in e)s.call(this,r,e[r]);else t.V.isString(e)&&s.call(this,e,n);return this},add:function(t,e,n){this.set(t,e,n),this.watcher.addListener(t,e)},refresh:function(t){this.set(t,this.get(t))},has:function(t){return this.hasProp(t)||void 0!=this.get[t]},hasProp:function(e){return t.V.isObject(this._props)&&e in this._props},removeProps:function(e){return t.V.isString(e)?this.remove(e):t.V.isArray(e)?t.T.each(e,function(t){this.remove(t)},this):t.V.isObject(e)?t.T.each(e,function(t,e,n){this.remove(n)},this):(this.watcher.removeListener(),this.props=this._props={}),this},removePropsAll:function(){this.removeProps()},remove:function(t){return t&&""!=t?(this._props[t]=null,delete this._props[t],this.watcher.removeListener(t),this):this},getItem:function(t,e){var i=(e?n.sessionStorage:n.localStorage).getItem(t);try{i=JSON.parse(i)}catch(s){}return i},setItem:function(e,i,s){function r(e,i){(t.V.isObject(i)||t.V.isArray(i))&&(i=JSON.stringify(i)),(s?n.sessionStorage:n.localStorage).setItem(e,i)}if(t.V.isObject(e))for(var o in e)r(o,e[o]);else{if(!("string"==typeof e&&e.length>0))return this;r(e,i)}},hasItem:function(t,e){return Boolean((e?n.sessionStorage:n.localStorage).getItem(t))},removeItem:function(t,e){(e?n.sessionStorage:n.localStorage).removeItem(t)},removeItems:function(e,n){t.V.isString(e)?this.removeItem(e,n):t.V.isArray(e)?t.T.each(e,function(t){this.removeItem(t,n)},this):n?sessionStorage.clear():localStorage.clear()},_initComponents:function(){t.T.each(this.components,function(t){},this)},_getTags:function(){this.tags=[],this.tags=this.$mid&&0===this.tags.length&&function(t){var e="#"===t[0],n="."===t[0];return e||n?document.querySelectorAll(t):document.querySelectorAll("[st-model="+t+"]")}(this.$mid)},_$proxyProps:function(){t.T.each(this._props,function(t,e,n){t&&!t.__ob__&&this._observe(t,n),this._$proxyProp(this.props,n)},this)},_$proxyProp:function(t,e){var n=this,i=t||this.props;Object.defineProperty(i,e,{configurable:!0,enumerable:!0,get:function(){return n.get(e)},set:function(t){t&&!t.__ob__&&n._observe(t,e),n.set(e,t)}})},_observe:function(e,n){t.Observe(e,this._watchServe.bind(this),this,n)},_watchServe:function(t){t.tier?(t.target[t.tier]&&(this._props[t.tier][t.name]=t.newValue),"update"==t.type&&this.watcher.update(t.tier,this._props[t.tier])):"update"==t.type&&this.set(t.name,t.newValue)},_watchProp:function(t,e){this.watcher&&this.watcher.update(t)},_watchAddProp:function(t,e){this.watcher&&this.watcher.add(t,e)}}}(SYST,window),function(t){t.shareModel={models:{},add:function(e,n){t.V.isEmpty(e)&&(e=(new Date).getTime()+Math.random()),this.models[e]=n},get:function(t){var e=this.models;return e[t]?e[t]:null},remove:function(t){var e=this.models,n=e[t];return n&&(e[t]=null,delete e[t]),n},has:function(t){return!!this.models[t]}}}(SYST),function(t){var e=function(){this.__instance_SYST__="SYST View",this.__Name__="SYST View"};t.View=function(){var n=t.extendClass(arguments,e);return n._initialize(),n},e.prototype={_initialize:function(){this.model=this.model||new t.Model,this.$http=this.$http||new t.Http,this.container=this.container||"body",this.template=null,this.container=t.Dom(this.container),this._eventCaches_={},!this.autoEvent&&this.events&&t.V.isObject(this.events)&&this._autoHandleEvent("on"),!this.unInit&&this.init&&this.init.apply(this)},$:t.$,destroy:function(){return this.container.html(""),this._autoHandleEvent("off"),this},proxy:t.T.proxy,_parseEvent:function(e){function n(e,i,s){t.V.isObject(e)?t.T.each(e,function(e,s,r){t.V.isObject(e)?n.call(this,e,r):this._toCache(r,i,e)}.bind(this)):this._toCache.call(e,i,s)}return t.V.isObject(e)?void n.call(this,e,"body"):this},_autoHandleEvent:function(e){e=e||"on",0===Object.keys(this._eventCaches_).length&&this._parseEvent(this.events),t.T.each(this._eventCaches_,function(n){n.length>0&&t.T.each(n,function(n){t.Events.initEvent(t.Dom(n.selector),n.eventName,this.proxy(this,n.fnName),e,n.container)},this)},this)},_toCache:function(e,n,i){var s=!1,r=this._parseString(e),o=this._eventCaches_[r.eventName];if(!r.eventName)throw new Error("对象侦听"+r.eventName+"不存在");if(!this[i])throw new Error("对象"+this+"不存在"+i+"方法");if(!r.selector)throw new Error("事件函数"+r.selector+"不存在");return r.handler=this[i],r.fnName=i,r.container=n,o||(o=[]),o.length>0&&t.T.each(o,function(t){s=r.eventName==t.eventName&&r.fnName==t.fnName&&r.container==t.container}),!s&&o.push(r),this._eventCaches_[r.eventName]=o,r},_getCache:function(e,n,i){var s,r=this._parseString(e);return t.T.each(this._eventCaches_,function(e){e.length>0&&t.T.each(e,function(t){t.selector==r.selector&&t.fnName==i&&t.container==n&&t.handler==this[i]&&(s=t)},this)},this),s},_parseString:function(e){var n=t.T.trim(e).split(/\s+/gi),i=n[1].replace(/^\$*|[\(*]|[\)*]$/gi,"").replace(/"|'/gi,'"'),s=n[0].replace(/^\s*|\s*$/gi,"");return{eventName:s,selector:i}},onEvent:function(e,n,i){if(e&&n){var s=this._toCache(e,i,n);t.Events.initEvent(t.Dom(s.selector),s.eventName,this.proxy(this,s.fnName),"on",s.container)}else this._autoHandleEvent("on");return this},offEvent:function(e,n,i){if(e&&n){var s=this._getCache(e,i,n);s&&t.Events.initEvent(t.Dom(s.selector),s.eventName,this.proxy(this,s.fnName),"off",s.container)}else this._autoHandleEvent("off");return this},shareModel:t.shareModels}}(SYST,window),function(t){var e=function(){this.__instance_SYST__="SYST Controller",this.__Name__="SYST Controller"};t.Controller=function(){var n=t.extendClass(arguments,e);return n._initialize(),n},e.prototype={shareModel:t.shareModel,$:t.$,_initialize:function(){this.defaultHost=this.defaultHost||location.host,this.model=t.Model(),t.V.isFunction(this.init)&&this.init.apply(this,arguments)},getModel:function(t){return t?this.shareModel.get(t):this.model},setModel:function(e){if(t.V.isEmpty(e))throw new Error("setModel: 参数有误");this.shareModel.add(e),this.model=e}}}(SYST),function(t){var e=function(t,e){this.cname=t,this.cmodel=this.cname+"-model",this.options=e||{}};e.prototype={_init:function(){this.container=t.$(this.cname)[0],this.template=this.options.template||this.container.html(),this.container.attr("st-model",this.cmodel),this.content=t.$(this.template),this.container.append(this.content),this.model=t.Model(this.cmodel,this.options),this._implantation()},_implantation:function(){this.container.replace(this.content)}},t.Component=function(t,n){return new e(t,n)}}(SYST),function(t){t.UI=function(){}}(SYST),SYST}.call(window));