(function(t){"use strict";var e=this,t={};t="undefined"!=typeof exports?exports:e.SYST={},t.version="1.0.3",t.author="Rodey Luo",t.name="SYST JS MVC mini Framework (JS MVC框架)",t.noConflict=function(){return e.SYST=t,this};try{t.$=e.jQuery||e.Zepto||void 0}catch(n){throw new Error("$不存在，请先引入jQuery|Zepto插件，依赖其中一个。"+n)}var r=function(t,e){if(!t)return e;if(!e)return t;if(!e.prototype){e.__super__=t;var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}return e},i=function(t){var e,n=t,r={};for(e in n)n.hasOwnProperty(e)&&(r[e]=n[e]);return r},o=function(t,e){var n=[];t=t||window;for(var r=2;r<arguments.length;r++)n.push(arguments[r]);return function(r){if(r&&"object"==typeof r&&(r.preventDefault(),r.stopPropagation()),n.push(r),!t[e])throw new Error(e+" 函数未定义！");t[e].call(t,r,n)}};t.extend=r,t.clone=i,t.hoadEvent=o,"function"==typeof define?define(function(){return t}):"undefined"!=typeof exports&&(module.exports=t),e.SYST=t}).call(this),function(t){"use strict";t.Validate=function(e){return this.__Name__="Validate",e?(e.__SuperName__="SYST Validate",e=t.extend(t.Validate.prototype,e)):new t.Validate({})};t.V=t.Validate.prototype={isEmpty:function(t){return t&&0!==t.length&&""!==t&&null!=t?!1:!0},isSet:function(t){return"undefined"!=typeof t?!0:!1},between:function(t,e,n,r){return r=r||!1,r?t.length>=e&&t.length<=n?!0:!1:t.length>e&&t.length<n?!0:!1},isCN:function(t,e){return e?/^[\u4e00-\u9fa5]+$/.test(t):/[\u4e00-\u9fa5]+/gi.test(t)},isEmail:function(t){return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/gi.test(t)},isURL:function(t){return/^http:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/i.test(t)},isTel:function(t){return/^(\(\d{3,4}\)|\d{3,4}-)?\d{7,8}$/gi.test(t)},isMobile:function(t){return/^1[3|4|5|7|8]{1}\d{9}$/.test(t)},isZip:function(t){return/^\d{6}$/.test(t)},isDateLocal:function(t){return/^(\d{4})-(\d{1,2})-(\d{1,2})$/.test(t)},isDateTime:function(t){return/^(\d{4})-(\d{1,2})-(\d{1,2})\s+(\d{1,2}):(\d{1,2}):(\d{1,2})$/.test(t)},isTime:function(t){return/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/.test(t)},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:function(t){return"[object Array]"===toString.call(t)},isDate:function(t){return"[object Date]"===toString.call(t)},isObject:function(t){return null!=t&&"object"==typeof t},isFunction:function(t){return"function"==typeof t},isFile:function(t){return"[object File]"===toString.call(t)},isBlob:function(t){return"[object Blob]"===toString.call(t)},isBoolean:function(t){return"boolean"==typeof t},isdefined:function(t){return"undefined"!=typeof t},isRegExp:function(t){return"[object RegExp]"===toString.call(t)},isWindow:function(t){return t&&t.document&&t.location&&t.alert&&t.setInterval},isElement:function(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}}}(SYST),function(t){"use strict";var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};t.Tools=function(e){return this.__Name__="Tools",e?(e.__SuperName__="SYST Tools",e=t.extend(t.Tools.prototype,e)):new t.Tools({})};t.T=t.Tools.prototype={parseDom:function(e,n){var r=document.createElement(n||"div");return t.$?(t.$(r).html(e),t.$(r)[0]):(r.innerHTML=e,r.childNodes)},trigger:function(t,e,n,r){if(t&&e&&""!==e)try{t[method].call(t,n,arguments),"function"==typeof r&&r.call(t,n)}catch(i){throw new Error(t+"不存在"+e+"方法 <::>")}},trim:function(t){return t.replace(/^\s*|\s*$/gi,"")},rtrim:function(t,e,n){if(e){var r;return r=n?new RegExp("\\"+e+"*","gi"):new RegExp("^(\\"+e+")*|(\\"+e+")*$","gi"),t.replace(r,"")}return this.trim(t)},indexOf:function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1},arrRemove:function(t,e){var n=this.indexOf(t,e);return n>=0&&t.splice(n,1),e},F2C:function(t){for(var e="",t=t.replace(/\s*/gi,""),n=0;n<t.length;n++){var r=t.charCodeAt(n);e+=12288!=r?r>65280&&65375>r?String.fromCharCode(r-65248):String.fromCharCode(r):String.fromCharCode(32)}return e=e.replace(/\s*/gi,""),e.toUpperCase()},escapeHtml:function(t){return t.replace(/&(?![\w#]+;)|[<>"']/gi,function(t){return n[t]})},dateFm:function(t){return 10>t?"0"+t:t},setDateFormat:function(e,n,r){function i(t,e){e.push(r?o.dateFm(t):t)}if(t.V.isEmpty(e))return"";var o=this,s=new Date(parseInt(e,10)),a=[],u=[];if(!n)return s.getFullYear()+"-"+this.dateFm(s.getMonth()+1)+"-"+this.dateFm(s.getDate())+" "+this.dateFm(s.getHours())+":"+this.dateFm(s.getMinutes())+":"+this.dateFm(s.getSeconds());var c=n.match(/[^\w\d\s]+?/i),l=c[0]||"-",h=c[1]||":";return/y+?/i.test(n)&&i(s.getFullYear(),a),/m+?/i.test(n)&&i(s.getMonth()+1,a),/d+?/i.test(n)&&i(s.getDate(),a),/h+?/i.test(n)&&i(s.getHours(),u),/i+?/i.test(n)&&i(s.getMinutes(),u),/s+?/i.test(n)&&i(s.getSeconds(),u),t.T.trim(a.join(l)+(u.length>0?" "+u.join(h):""))},daysBetween:function(t,e,n){var r=t.substring(5,t.lastIndexOf("-")),i=t.substring(t.length,t.lastIndexOf("-")+1),o=t.substring(0,t.indexOf("-")),s=e.substring(5,e.lastIndexOf("-")),a=e.substring(e.length,e.lastIndexOf("-")+1),u=e.substring(0,e.indexOf("-")),c=(Date.parse(r+"/"+i+"/"+o)-Date.parse(s+"/"+a+"/"+u))/864e5;return n&&"function"==typeof n?void n(c):c},randomChar:function(t,n){for(var i,o=48,a=122,u=0,c=t,l="",h=[58,59,60,61,62,63,64,91,92,93,94,95,96],f=[48,49,73,76,79,108,111];c>u;++u)i=Math.floor(Math.random()*s+Math.random()*e),i>=o&&a>=i&&-1===h.indexOf(r)?n===!0?-1===f.indexOf(r)?l+=String.fromCharCode(10,i):c++:l+=String.fromCharCode(10,r):c++;return l.replace(/[\n\t\r]*/gi,"")},params:function(e,n){if(this._pars&&this._pars[e])return this._pars[e];var r="";if(r=t.V.isEmpty(n)?window.location.search.substr(1):n.split("?")[1]||"",t.V.isEmpty(r))return{};var i=r.replace(/^\?/,"").split("&");if(!i||[]===i)return{};for(var o=0,s=i.length,a={};s>o;++o){var u=i[o].split("=");u[0]&&""!==u[0]&&Object.defineProperty(a,u[0],{value:decodeURI(u[1])||null,writable:!0,enumerable:!0,configurable:!0})}return this._pars=a,e?decodeURI(a[e]):a},getParams:function(e,n){var r=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i="";return i=t.V.isEmpty(n)?window.location.search.substr(1).match(r):(n.split("?")[1]||"").match(r),i?decodeURI(i[2]):null},paramData:function(e,n){if(t.V.isEmpty(e)||!t.V.isObject(e))return"";var r=e,i="";for(var o in r)i+="&"+o+"="+encodeURI(r[o]);return i=i.substr(1),n===!0?"?"+i:i},jumpTo:function(e,n){var e=e||"#";t.V.isString(n)?e=e+"?"+n:t.V.isObject(n)&&(e+=t.T.paramData(n,!0)),location.href=e},Cookie:function(t,e,n){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(e))||null===e||void 0===e)){if(n=n||{},(null===e||void 0===e)&&(n.expires=-1),"number"==typeof n.expires){var r=n.expires,i=n.expires=new Date;i.setDate(i.getDate()+r)}return e=String(e),document.cookie=[encodeURIComponent(t),"=",n.raw?e:encodeURIComponent(e),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}n=e||{};for(var o,s=n.raw?function(t){return t}:decodeURIComponent,a=document.cookie.split("; "),u=0;o=a[u]&&a[u].split("=");u++)if(s(o[0])===t)return s(o[1]||"");return null},each:function(e,n){if(t.V.isObject(e)){var r=0;for(var i in e)n.call(e,e[i],r++,i)}else{if(!t.V.isArray(e))throw new SyntaxError("args1 is must Object or Array");for(var o=0,s=e.length;s>o;++o)n(e[o],o)}}}}(SYST),function(t){"use strict";var e=1,n=2,r=3,i=t.Promise=function(t,n){this.STATE=e,this._fulfils=[],this._rejecteds=[],this.args=[],this.errs=[],this.data=null,this._bunchFulfil=!1,this._bunchReject=!1,this.then(t,n)};t.Promise.prototype={then:function(i,o){return this.STATE===e?(i&&t.V.isFunction(i)&&this._fulfils.push(i),o&&t.V.isFunction(o)&&this._rejecteds.push(o)):this.STATE===n?this.resolve():this.STATE===r&&this.reject(),this},done:function(t){return this.then(t)},success:function(t){return this.then(t)},"catch":function(t){return this.then(null,t)},error:function(t){return this.then(null,t)},resolve:function(t,e){this.STATE=n,t&&(this.data=t,this.args.push(t)),this._bunchFulfil=e!==!1?this._bunchFulfil:e;var r=this._fulfils.shift();if(!r||"function"!=typeof r)throw new TypeError("no found a function object to [then|all|done|success]");this._bunchFulfil?this._fulfils.push(r):(this._bunchFulfil=!1,r.apply(this,this.args))},reject:function(t,e){this.STATE=r,t&&this.errs.push(t),this._bunchReject=e!==!1?this._bunchReject:e;var n=this._rejecteds.shift();if(!n||"function"!=typeof n)throw new TypeError("no found a function object to [then|catch|error]");this._bunchReject?this._rejecteds.push(n):(this._bunchReject=!1,n.apply(this,this.errs))},all:function(e){if(!t.V.isArray(e))throw new TypeError("args me be a array, queue element is be function");return this._bunchFulfil=!0,this._bunchReject=!0,t.T.each(e,function(e){t.V.isFunction(e)&&e()}),this}},t.P=t.Promise=i}(SYST),function(t){"use strict";t.tplConfig={open:"<%",close:"%>"};var e,n,r=/\\|'|\r|\n|\u2028|\u2029/g,i="([\\s\\S]+?)",o=/^=+\s*|\s*$/gi,s=t.tplConfig.open,a=t.tplConfig.close,u={},c={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},l=function(t){return"\\"+c[t]},h=function(t){var e=[];for(var n in t)e.push(t[n].source);return e.join("|").replace(/|$/i,"")},f=function(){s=t.tplConfig.open,a=t.tplConfig.close,e={execter:new RegExp(s+i+a,"g"),exporter:new RegExp(s+"\\s*="+i+a,"g"),escaper:new RegExp(s+"\\s*=="+i+a,"g")},n=new RegExp(h(e),"g")},d=function(e,i,s,a){var u=[],c=[],h='var _s=""; with($d || {}){ ',f="",d=0,i=i;if(s){if(t.V.isObject(s))for(var p in s)f+=s[p].toString()+";";else if(t.V.isFunction(s))f+=s.toString()+";";else{if(!t.V.isString(s)||!/function\(\)/gi.test(s))throw new EvalError("helper can be function");f+=s.replace(/;$/i,"")+";"}h=f+h}if(h="var each = SYST.T.each;"+h,e.replace(n,function(n,i,o,s,a){var h=e.slice(d,a).replace(r,l);return h=h&&""!=h?"_s+='"+h+"';":null,d=a+n.length,c.push(h),u.push(t.T.trim(i)),n}),0===u.length)return e;for(var g,m,v=0,_=u.length;_>v;++v)g=u[v],m=c[v+1],-1!==g.search(/^\s*={2}/)?g="_s+=(SYST.T.escapeHtml("+g.replace(o,"")+"));":/^=[^=]+?/i.test(g)&&(g="_s+=("+g.replace(o,"")+");"),h+=(g||"")+(m||"");h=""+h+" }; return _s;";var w=new Function("$d",h);return h=w.call(a||this,i)},p=function(e,n,r,i){var o,s="";if(f(),-1!==e.search(/[<|>|\/]/i))s=t.T.trim(e);else{if(u[e])return u[e];if(o=document.querySelector("#"+e.replace("#"))){var a=/^(TEXTEREA|INPUT)$/i.test(o.nodeName)?o.value:o.innerHTML;s=t.T.trim(a)}u[e]=s}return d(s,n,r,i)};t.Render=p,t.T=t.Tools.prototype=t.extend(t.T,{render:p})}(SYST),function(t){"use strict";t.Events=function(e,n,r,i,o,s){var o=o||"on",a="abort reset click dblclick tap touchstart touchmove touchend change mouseover mouseout mouseup mousedown mousemove mousewheel drag dragend dragenter dragleave dragover dragstart drop resize scroll submit select keydown keyup keypress touchstart touchend load unload blur focus contextmenu formchange forminput input invalid afterprint beforeprint beforeonload haschange message offline online pagehide pageshow popstate redo storage undo canplay canplaythrough durationchange emptied ended loadeddata loadedmetadata loadstart pause play playing progress ratechange readystatechange seeked seeking stalled suspend timeupdate volumechange waiting cut copy paste".split(/\s+/gi);e||(e=window);for(var u=0;u<a.length;u++)a[u]===r&&("window"==e.selector?"on"==o?$(window).off().on(r,t.hoadEvent(n,i)):$(window).off(r,t.hoadEvent(n,i)):"document"==e.selector||"html"==e.selector||"body"==e.selector?"on"==o?$(e.selector).off().on(r,t.hoadEvent(n,i)):$(e.selector).off(r,t.hoadEvent(n,i)):"on"==o?$(s||"body").undelegate(e.selector,r,t.hoadEvent(n,i)).delegate(e.selector,r,t.hoadEvent(n,i)):$(s||"body").undelegate(e.selector,r,t.hoadEvent(n,i)))}}(SYST),function(t,e){"use strict";t.Model=function(e){return this.__Name__="Model",e?(e=e||{},e.__SuperName__="SYST Model",e=t.extend(t.Model.prototype,e),e._initialize(),e):new t.Model({})};t.Model.prototype={_initialize:function(){this.init&&this.init.apply(this,arguments),this.attributes={},t.shareModel.add(this)},get:function(t,e){return this.attributes[t]},set:function(t,e,n){if(null==t)return this;if(t)if("object"==typeof t)for(var r in t)this.attributes[r]=t[r];else{if(!("string"==typeof t&&t.length>0))return this;this.attributes[t]=e}},getItem:function(t,e){var n=(e?window.sessionStorage:window.localStorage).getItem(t);try{n=JSON.parse(n)}catch(r){}return n},setItem:function(e,n,r){function i(e,n){t.V.isObject(n)&&(n=JSON.stringify(n)),(r?window.sessionStorage:window.localStorage).setItem(e,n)}if(t.V.isObject(e))for(var o in e)i(o,e[o]);else{if(!("string"==typeof e&&e.length>0))return this;i(e,n)}},has:function(t){return Boolean(this.attributes[t])},hasItem:function(t,e){return Boolean((e?window.sessionStorage:window.localStorage).getItem(t))},add:function(t,e,n){this.set(t,e,n)},remove:function(t){return t&&""!=t?(this.attributes[t]=null,void delete this.attributes[t]):this},removeItem:function(t,e){(e?window.sessionStorage:window.localStorage).removeItem(t)},removeAll:function(t){t?this.attributes=[]:function(){window.localStorage.clear(),window.sessionStorage.clear()}()},_getName:function(){return this.__Name__},doRequest:function(n,r,i,o,s){var a,u,c=this,l={};if(r&&"object"==typeof r&&n&&""!=n){s?(a=s.type,u=s.dataType||c.ajaxDataType||"json",l=s):(a=c.ajaxType||"POST",u=c.ajaxDataType||"json"),c.ajaxBefore&&t.V.isFunction(c.ajaxBefore)&&(l.beforeSend=c.ajaxBefore.apply(c));var h=t.extend(l,{url:n,type:a,data:r,dataType:u,success:function(e){c.ajaxSuccess&&t.V.isFunction(c.ajaxSuccess)&&c.ajaxSuccess.call(c,e),i&&t.V.isFunction(i)&&i.call(c,e)},error:function(e,n){var r=e.response;try{r=JSON.parse(r)}catch(i){}c.ajaxError&&t.V.isFunction(c.ajaxError)&&c.ajaxError.call(c,r,e,n),o&&t.V.isFunction(o)&&o.call(c,r,e,n)},complete:function(e){c.ajaxComplete&&t.V.isFunction(c.ajaxComplete)&&c.ajaxComplete.call(c,e)}});if(!e.$)throw new Error("doRequest: $不存在，此方法依赖于(jQuery||Zepto||Ender)");e.$.ajax(h)}},doAjax:function(t,e,n,r,i){this.doRequest(t,e,n,r,i)}}}(SYST,window),function(t){var e=new XMLHttpRequest,n={dataType:"json",type:"POST",async:!0,timeout:5e3,crossDomain:!0,header:{"Content-type":"application/x-www-form-urlencoded"}},r=function(t,e){var n=t;if("json"===e)try{n=JSON.parse(t)}catch(r){}else if("text"===e)try{n=JSON.stringify(t)}catch(r){}return n},i=function(e,n,i){var o=r(e,n);t.V.isFunction(i)&&i(o)},o=function(e,n,i){t.V.isFunction(i)&&i(r(e.responseText,n),e)},s=function(r){if(t.V.isObject(r)&&(n=t.extend(r,n)),!t.V.isEmpty(n.url)){var s=n.data,a="GET"===n.type.toUpperCase()?n.url.split("?")[0]+t.T.paramData(n.data,!0):n.url,u="GET"===n.type.toUpperCase()?void 0:s,c="async"in n?n.async:!0;i(void 0,n.dataType,n.ajaxBefore),e.open(n.type,a,c);for(var l in n.header)e.setRequestHeader(l,n.header[l]);e.onreadystatechange=function(){4===e.readyState&&(e.onreadystatechange=null,200===e.status?i(e.responseText,n.dataType,n.success):i(e,n.dataType,n.error),o(e,n.dataType,n.complate))},e.send(u)}};t&&(t.ajax=s,t.Model.prototype.ajax=s)}(SYST),function(t){"use strict";t._shareModels={};t.shareModel={add:function(e,n){t._shareModels[e]=n},get:function(e){var n=t._shareModels;return null==e?n:n[e]?n[e]:null},remove:function(e){var n=t._shareModels,r=n[e];return r&&(t._shareModels[e]=null,delete t._shareModels[e]),r},has:function(e){return t._shareModels[e]}}}(SYST),function(t,e){"use strict";t.View=function(e){return this.__Name__="View",e?(e.__SuperName__="SYST View",e=t.extend(t.View.prototype,e),!e.unInit&&e._initialize(),e):new t.View({})};t.View.prototype={$el:{},tagPanel:"selection",_initialize:function(){var e=this;if(this.model=this.model?this.model:this.controller?this.controller.getModel():void 0,this.init&&this.init.apply(this,arguments),this.render&&t.V.isFunction(this.render)){var n="<"+e.tagPanel+"/>";e.$el=e.parseDom("",n),e.render.apply(e,arguments)}this.events&&this.events!={}&&t.V.isObject(this.events)&&this.onEvent()},destroy:function(){this.$el.remove()},handEvent:function(t,e){for(var n=this,r=[],i=2;i<arguments.length;i++)r.push(arguments[i]);return function(i){r.push(e),r.push(i),t.apply(n,r)}},hoadEvent:t.hoadEvent,parseEvent:function(e){function n(t,e,n){i.push(t),r.push(e),o.push(n)}if(!e||0==e.length||e==={})return this;var r=[],i=[],o=[];for(var s in e){var a=e[s];if(t.V.isObject(a))for(var u in a){var c=this.parseString(a,u),l=c[0],h=c[1],f=c[2];n(l,h,f)}else{var c=this.parseString(e,s),l=c[0],h=c[1],f=c[2];n(l,h,f)}}return{events:r,elements:i,functions:o}},autoHandleEvent:function(e){var n=this.parseEvent(this.events),r=n.events,i=n.elements,o=n.functions;if(!r||0==r.length||r.length=={})return this;for(var e=e||"on",s=0,a=r.length;a>s;s++){if(!r[s])throw new Error("对象侦听"+r[s]+"不存在");if(!o[s])throw new Error("对象"+this+"不存在"+o[s]+"方法");if(!i[s])throw new Error("事件函数"+o[s]+"不存在");t.Events($(i[s]),this,r[s],o[s],e,this.triggerContainer||"body")}return this},parseString:function(t,e){var n=$.trim(e).split(/\s+/gi),r=n[1].replace(/^\$*|[\(*]|[\)*]$/gi,"").replace(/"|'/gi,'"'),i=n[0].replace(/^\s*|\s*$/gi,""),o=t[e];return[r,i,o]},onEvent:function(e,n,r){t.V.isEmpty(e)?this.autoHandleEvent("on"):t.Events.initEvent(t.V.isString(e)?$(e):e,this,n,r,"on",this.triggerContainer)},offEvent:function(e,n,r){t.V.isEmpty(e)?this.autoHandleEvent("off"):t.Events.initEvent(t.V.isString(e)?$(e):e,this,n,r,"off",this.triggerContainer)},template:function(e,n,r){var i;return i=t.Render(e,n,r,this)},parseDom:function(e,n){return t.T.parseDom(e,n)},getController:function(){return this.controller},getModel:function(){return this.model||this.getController().getModel()},shareModel:t.shareModels}}(SYST,window),function(t){"use strict";t.Controller=function(e){return this.__Name__="Controller",this.model=void 0,this.superView=void 0,this.shareModels=t.shareModel.get(null),e?(e.__SuperName__="SYST Controller",e=t.extend(t.Controller.prototype,e),e._initialize(),e):new t.Controller({})};t.Controller.prototype={defaultHost:location.host,shareModel:t.shareModel,_initialize:function(){this.init&&this.init.apply(this,arguments)},getModel:function(t){return t?this.shareModel.get(t):this.model},setModel:function(t){if(""!==key||null!=t)this.shareModel.add(t);else{if("object"!=typeof key)throw"setModel: 参数有误";this.model=key}}}}(SYST),function(t){"use strict";var e=(t.Router=function(e){return this.__Name__="Router",e?(e.__SuperName__="SYST Router",e=t.extend(t.Router.prototype,e)):new t.Router({})},window.location),n=e.host,r=(e.port,e.origin||e.protocol+"//"+n,e.pathname,e.hash),i=("pushState"in history,"replaceState"in history,/\((.*?)\)/g),o=/(\(\?)?:\w+/g,s=/\*\w+/g,a=/[\-{}\[\]+?.,\\\^$|#\s]/g,u=function(t){return t.replace(/[#!]/gi,"").split("?")[0]};t.R=t.Router.prototype={_cache:{},_stateCache:[],routers:{},_initialize:function(){if(this.routers&&this.routers!={}){var e=this.routers;for(var n in e)this._initRouters(n,e[n]);this.start()}this.init&&t.V.isFunction(this.init)&&this.init.apply(this)},_initRouters:function(t,e){this._cache[t]=e},start:function(){if(r&&""!==r){var t=u(r);this["switch"](t)}return this._changeStart(),this},stop:function(){this._changeStop()},when:function(e,n){return t.V.isEmpty(e)?void 0:(t.V.isObject(n)?this._cache[e]=n:t.V.isFunction(n)&&(this._cache[e]=n.call(this)),this)},"switch":function(e){return this._cache&&{}!==this._cache?(this.params=t.T.params(null,window.location.href),this._exec(e),this):void 0},_getRouter:function(t){if(this._cache&&this._cache!=={}){var e,n;for(var r in this._cache){var i=this._routeToRegExp(r);if(i.test(t)){n=r,e=this._cache[r];break}}return{routeKey:n,router:e}}},_routeToRegExp:function(t){return t=t.replace(a,"\\$&").replace(i,"(?:$1)?").replace(o,function(t,e){return e?t:"([^/?]+)"}).replace(s,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,n,r){var i=e.exec(r).slice(1),o=e.exec(n).slice(1),s=[],a={};if(t.V.isArray(i)&&i.length>0)for(var u=0,c=i.length;c>u;++u){var l=i[u];s.push(l?decodeURIComponent(l):null)}if(t.V.isArray(o)&&o.length>0)for(var h=0,c=o.length;c>h;++h){var f=o[h];f&&(a[f.replace(/^[^\w]|[^\w]$/i,"")]=s[h])}return{paramsObject:a,params:s}},_exec:function(n){var r=this._getRouter(n),i=r.router,o=r.routeKey;this.currentRouter=i,this.currentRouter.route=o,t.V.isRegExp(o)||(n=this._routeToRegExp(o));var s=u(e.hash),a=this._extractParameters(n,o,s),c=a.paramsObject;a.params;this.params=t.extend(this.params,c),this._onReady(),this._execRouter(i)},_execRouter:function(t){var e=this;t&&(t.template?this._template(t.template,t.container,function(n){e._execMAction(t,n),e._onRender()}):e._execMAction(t))},_execMAction:function(e,n){this.tpl=n;var r={model:e.model,tpl:n,params:this.params,router:this},i={model:e.model,tpl:n,params:this.params,router:this,view:e.view};e.model&&function(){return t.Model(e.model)}(),e.view&&function(){return t.View(t.extend(e.view,r))}(),e.controller&&function(){return t.Controller(t.extend(e.controller,i))}(),e.action&&t.V.isFunction(e.action)&&e.action.call(this,e.model,n)},_changeStart:function(){this._changeStop(),window.addEventListener("hashchange",t.hoadEvent(this,"_changeHandler"),!1)},_changeStop:function(){window.removeEventListener("hashchange",t.hoadEvent(this,"_changeHandler"),!1)},_changeHandler:function(t){var e=this,n=this.currentRouter;this.oldURL="#"+t.oldURL.split("#")[1],this.newURL="#"+t.newURL.split("#")[1];var r=u(this.newURL);n&&this._onDestroy(function(){e["switch"](r)})},_template:function(e,n,r){var i=this;this.container=$("#"+n.replace(/#/gi,"")),/<|>/g.test(e)?r&&t.V.isFunction(r)&&r.call(i,e):this.container.load(e,function(e){r&&t.V.isFunction(r)&&r.call(i,e)},function(t){throw new Error("load template is failed!")})},_onReady:function(){var t=this.currentRouter;t&&t.onReady&&t.onReady.call(this)},_onRender:function(e){var n=this.currentRouter;e&&t.V.isFunction(e)&&e();var r=t.Render(this.tpl,n.data);this.container.html(r),this.tpl=r,n&&n.onRender&&n.onRender.call(this,r)},_onDestroy:function(e){var n=this.currentRouter,r=n.onDestroy,i=n.route;n._destroyState;if(n&&r){var o=r.apply(this);o!==!1?(n._destroyState=!0,e&&t.V.isFunction(e)&&e()):(n._destroyState=!1,this._updateHash(i))}else e&&t.V.isFunction(e)&&e()},_updateHash:function(t){window.location.hash="#!"+t.replace(/^#!/i,"")},_onAnimate:function(t,e){var n=this.currentRouter;if(n){var r=n.animate,i=n.animateDuration||300,o=this.container,t=t||"on";if(n&&o)switch(r){case"slide":"on"===t?o.slideDown(i,e):o.slideUp(100,e);break;case"fade":"on"===t?o.fadeIn(i,e):o.fadeOut(100,e);break;default:o.show()}}}}}(SYST),function(t){"use strict";var e=navigator.userAgent.toUpperCase(),n=-1!==e.indexOf("ANDROID"),r=-1!==e.indexOf("IPHONE OS"),i=n||r?!0:!1,o=-1!==e.indexOf("MOBILE"),s=-1!==e.indexOf("IPAD"),a=o||s?!0:!1;t.Native=function(e){return this.__Name__="Native",e?(e.__SuperName__="SYST Native",e=t.extend(t.Native.prototype,e)):new t.Native({})};t.N=t.Native.prototype={isAndroid:n,isIos:r,isNative:i,isPhone:o,isPad:s,isMobile:a,callNative:function(t){}}}(SYST);