var ST=function(){function t(){this.author="Rodey",this.version="@version",this.name="SYST JS MVC mini Framework (JS MVC框架)",this.root=window,this.$=$,this.shareModels=YT.ShareModel.getInstance(),this.V=new YT.Validate,this.T=new YT.Tools,this.ajax=new YT.Ajax}return t.getInstance=function(){return this._instace?this._instace:new t},t.prototype.Model=function(t){return new YT.Model(t)},t.prototype.View=function(t){return new YT.View(t)},t.prototype.Controller=function(t){return new YT.Controller(t)},t.prototype.Validate=function(t){return new YT.Validate(t)},t.prototype.Tools=function(t){return new YT.Tools(t)},t.prototype.Router=function(){return new YT.Router},t.noConflict=function(){return window.SYST||new t},t.prototype.Render=function(t,e,n,i){return this.Tools().render(t,e,n,i)},t.prototype.Promise=function(t,e){return new YT.Promise(t,e)},t.prototype.P=function(t,e){return this.Promise(t,e)},t.extend=function(t,e){if(!t||t==={}||"object"!=typeof t)return e;if(!e||e==={}||"object"!=typeof e)return t;if(!e.prototype){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.__super__=t}return e},t.extendClass=function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):new n},t.clone=function(t){var e,n,i=t;for(n in i)i.hasOwnProperty(n)&&(e[n]=i[n]);return e},t.hoadEvent=function(t,e){for(var n=[],i=(t||window,2);i<arguments.length;++i)n.push(arguments[i]);return function(i){if(i&&"object"==typeof i&&(i.preventDefault(),i.stopPropagation()),n.push(i),!t[e])throw new Error(e+" 函数未定义！");t[e].call(t,i,n)}},t.tplConfig={open:"<%",close:"%>"},t}(),YT;!function(t){var e=function(){function t(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}return t.prototype.isEmpty=function(t){return!t||0===t.length||""===t||null==t},t.prototype.isSet=function(t){return"undefined"!=typeof t},t.prototype.between=function(t,e,n,i){return i=i||!1,i?t.length>=e&&t.length<=n:t.length>e&&t.length<n},t.prototype.isCN=function(t,e){return e?/^[\u4e00-\u9fa5]+$/.test(t):/[\u4e00-\u9fa5]+/gi.test(t)},t.prototype.isEmail=function(t){return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/gi.test(t)},t.prototype.isURL=function(t){return/^http:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/i.test(t)},t.prototype.isTel=function(t){return/^(\(\d{3,4}\)|\d{3,4}-)?\d{7,8}$/gi.test(t)},t.prototype.isMobile=function(t){return/^1[3|4|5|7|8]{1}\d{9}$/.test(t)},t.prototype.isZip=function(t){return/^\d{6}$/.test(t)},t.prototype.isDateLocal=function(t){return/^(\d{4})-(\d{1,2})-(\d{1,2})$/.test(t)},t.prototype.isDateTime=function(t){return/^(\d{4})-(\d{1,2})-(\d{1,2})\s+(\d{1,2}):(\d{1,2}):(\d{1,2})$/.test(t)},t.prototype.isTime=function(t){return/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/.test(t)},t.prototype.isNull=function(t){return null==t},t.prototype.isString=function(t){return t&&"string"==typeof t},t.prototype.isNumber=function(t){return null!=t&&"number"==typeof t},t.prototype.isArray=function(t){return t&&"[object Array]"===toString.call(t)},t.prototype.isDate=function(t){return t&&"[object Date]"===toString.call(t)},t.prototype.isObject=function(t){return t&&"object"==typeof t},t.prototype.isFunction=function(t){return t&&"function"==typeof t},t.prototype.isFile=function(t){return t&&"[object File]"===toString.call(t)},t.prototype.isBlob=function(t){return t&&"[object Blob]"===toString.call(t)},t.prototype.isBoolean=function(t){return"boolean"==typeof t},t.prototype.isdefined=function(t){return"undefined"!=typeof t},t.prototype.isRegExp=function(t){return t&&"[object RegExp]"===toString.call(t)},t.prototype.isWindow=function(t){return t&&t.document&&t.location&&t.alert&&t.setInterval},t.prototype.isElement=function(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))},t}();t.Validate=e}(YT||(YT={}));var YT;!function(t){var e=function(){function e(e){this._v=new t.Validate;for(var n in e)e.hasOwnProperty(n)&&Object.defineProperty(this,n,{value:e[n],writable:!1})}return e.prototype.template=function(t,e){var n=document.createElement(e||"div");return n.innerHTML=t,$?($(n).html(t),$(n)):n.childNodes},e.prototype.trigger=function(t,e,n,i){if(t&&e&&""!==e)try{t[e].call(t,n,arguments),"function"==typeof i&&i.call(t,n)}catch(o){throw new Error(t+"不存在"+e+"方法 <::>")}},e.prototype.trim=function(t){return t.replace(/^\s*|\s*$/gi,"")},e.prototype.rtrim=function(t,e,n){if(e){var i;return i=n?new RegExp("\\"+e+"*","gi"):new RegExp("^(\\"+e+")*|(\\"+e+")*$","gi"),t.replace(i,"")}return this.trim(t)},e.prototype.indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1},e.prototype.arrRemove=function(t,e){var n=this.indexOf(t,e);return n>=0&&t.splice(n,1),e},e.prototype.F2C=function(t){for(var e="",t=t.replace(/\s*/gi,""),n=0;n<t.length;n++){var i=t.charCodeAt(n);e+=12288!=i?i>65280&&65375>i?String.fromCharCode(i-65248):String.fromCharCode(i):String.fromCharCode(32)}return e=e.replace(/\s*/gi,""),e.toUpperCase()},e.prototype.dateFm=function(t){return 10>t?"0"+t:t},e.prototype.setDateFormat=function(t,e,n){function i(t,e){e.push(n?o.dateFm(t):t)}if(this._v.isEmpty(t))return"";var o=this,r=new Date(parseInt(t,10)),s=[],a=[];if(!e)return r.getFullYear()+"-"+this.dateFm(r.getMonth()+1)+"-"+this.dateFm(r.getDate())+" "+this.dateFm(r.getHours())+":"+this.dateFm(r.getMinutes())+":"+this.dateFm(r.getSeconds());var u=e.match(/[^\w\d\s]+?/i),h=u[0]||"-",c=u[1]||":";return/y+?/i.test(e)&&i(r.getFullYear(),s),/m+?/i.test(e)&&i(r.getMonth()+1,s),/d+?/i.test(e)&&i(r.getDate(),s),/h+?/i.test(e)&&i(r.getHours(),a),/i+?/i.test(e)&&i(r.getMinutes(),a),/s+?/i.test(e)&&i(r.getSeconds(),a),this.trim(s.join(h)+(a.length>0?" "+a.join(c):""))},e.prototype.daysBetween=function(t,e,n){var i=t.substring(5,t.lastIndexOf("-")),o=t.substring(t.length,t.lastIndexOf("-")+1),r=t.substring(0,t.indexOf("-")),s=e.substring(5,e.lastIndexOf("-")),a=e.substring(e.length,e.lastIndexOf("-")+1),u=e.substring(0,e.indexOf("-")),h=(Date.parse(i+"/"+o+"/"+r)-Date.parse(s+"/"+a+"/"+u))/864e5;return n&&"function"==typeof n?void n(h):h},e.prototype.params=function(t,e){if(this._pars&&this._pars[t])return this._pars[t];var n="";if(n=this._v.isEmpty(e)?window.location.search.substr(1):e.split("?")[1]||"",this._v.isEmpty(n))return{};var i=n.replace(/^\?/,"").split("&");if(!i||[]===i)return{};for(var o=0,r=i.length,s={};r>o;++o){var a=i[o].split("=");a[0]&&""!==a[0]&&Object.defineProperty(s,a[0],{value:decodeURI(a[1])||null,writable:!0,enumerable:!0,configurable:!0})}return this._pars=s,t?decodeURI(s[t]):s},e.prototype.getParams=function(t,e){var n,i=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i");return n=this._v.isEmpty(e)?window.location.search.substr(1).match(i):(e.split("?")[1]||"").match(i),n?decodeURI(n[2]):null},e.prototype.paramData=function(t,e){if(this._v.isEmpty(t)||!this._v.isObject(t))return"";var n=t,i="";for(var o in n)i+="&"+o+"="+encodeURI(n[o]);return i=i.substr(1),e===!0?"?"+i:i},e.prototype.Cookie=function(t,e,n){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(e))||null===e||void 0===e)){if(n=n||{},null!==e&&void 0!==e||(n.expires=-1),"number"==typeof n.expires){var i=n.expires,o=n.expires=new Date;o.setDate(o.getDate()+i)}return e=String(e),document.cookie=[encodeURIComponent(t),"=",n.raw?e:encodeURIComponent(e),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}n=e||{};for(var r,s=n.raw?function(t){return t}:decodeURIComponent,a=document.cookie.split("; "),u=0;r=a[u]&&a[u].split("=");u++)if(s(r[0])===t)return s(r[1]||"");return null},e.prototype.render=function(e,n,i,o){var r=t.Template.getInstance(e,n,i,o);return r.Render(e,n,i,o)},e}();t.Tools=e}(YT||(YT={}));var YT;!function(t){var e=1,n=2,i=3,o=function(){function o(n,i){this.state=e,this._v=new t.Validate,this._t=new t.Tools,this._fulfils=[],this._rejecteds=[],this._bunchFulfil=!1,this._bunchReject=!1,this.args=[],this.errs=[],this.data=null,this.then(n,i)}return o.prototype.then=function(t,o){return this.state===e?(t&&this._v.isFunction(t)&&this._fulfils.push(t),o&&this._v.isFunction(o)&&this._rejecteds.push(o)):this.state===n?this.resolve():this.state===i&&this.reject(),this},o.prototype.done=function(t){return this.then(t)},o.prototype.success=function(t){return this.then(t)},o.prototype["catch"]=function(t){return this.then(null,t)},o.prototype.error=function(t){return this.then(null,t)},o.prototype.resolve=function(t,e){this.state=n,t&&(this.data=t,this.args.push(t)),this._bunchFulfil=e!==!1?this._bunchFulfil:e;var i=this._fulfils.shift();if(!i||"function"!=typeof i)throw new TypeError("no found a function object to [then|all|done|success]");this._bunchFulfil?this._fulfils.push(i):(this._bunchFulfil=!1,i.apply(this,this.args))},o.prototype.reject=function(t,e){this.state=i,t&&this.errs.push(t),this._bunchReject=e!==!1?this._bunchReject:e;var n=this._rejecteds.shift();if(!n||"function"!=typeof n)throw new TypeError("no found a function object to [then|catch|error]");this._bunchReject?this._rejecteds.push(n):(this._bunchReject=!1,n.apply(this,this.errs))},o.prototype.all=function(t){var e=this;if(!this._v.isArray(t))throw new TypeError("args me be a array, queue element is be function");return this._bunchFulfil=!0,this._bunchReject=!0,this._t.each(t,function(t){e._t.isFunction(t)&&t()}),this},o}();t.Promise=o}(YT||(YT={}));var YT;!function(t){var e=function(){function e(e,n,i,o){this._lineFeedRegx=/\\|'|\r|\n|\u2028|\u2029/g,this._body="([\\s\\S]+?)",this._empty=/^=+\s*|\s*$/gi,this._tplCache={},this.lg=ST.tplConfig.open,this.rg=ST.tplConfig.close,this._escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},this.V=new t.Validate,this.T=new t.Tools,this.content=e,this.data=n,this.helper=i,this.target=o}return e.getInstance=function(e,n,i,o){return this._instance?this._instance:new t.Template(e,n,i,o)},e.prototype._template=function(t,e,n,i){var o=[],r=[],s='var _s=""; with($d || {}){ ',a="",u=0,e=e;if(this._tplCache[this.content]){var h=this._tplCache[this.content];return h.call(i||this,e)}if(n){if(this.V.isObject(n))for(var c in n)a+=n[c].toString()+";";else if(this.V.isFunction(n))a+=n.toString()+";";else{if(!this.V.isString(n)||!/function\(\)/gi.test(n))throw new EvalError("helper can be function");a+=n.replace(/;$/i,"")+";"}s=a+s}if(s="var each = SYST.T.each;"+s,t.replace(this.macs,function(e,n,i,s,a){var h=t.slice(u,a).replace(this._lineFeedRegx,this._escapeSpecial);return h=h&&""!=h?"_s+='"+h+"';":null,u=a+e.length,r.push(h),o.push(this.T.trim(n)),e}),0===o.length)return t;for(var p,l,f=0,d=o.length;d>f;++f)p=o[f],l=r[f+1],-1!==p.search(/^\s*={2}/)?p="_s+=(SYST.T.escapeHtml("+p.replace(this._empty,"")+"));":/^=[^=]+?/i.test(p)&&(p="_s+=("+p.replace(this._empty,"")+");"),s+=(p||"")+(l||"");s=""+s+" }; return _s;";var h=new Function("$d",s);return this._tplCache[this.content]=h,s=h.call(i||this,e)},e.prototype.Render=function(t,e,n,i){var o,r="",t=t||this.content,e=e||this.data;if(n=n||this.helper,i=i||this.target,this._reset(),-1!==t.search(/[<|>|\/]/i))r=this.T.trim(t);else if(o=document.querySelector("#"+t.replace("#",""))){var s=/^(TEXTEREA|INPUT)$/i.test(o.nodeName)?o.value:o.innerHTML;r=this.T.trim(s)}return this._template(r,e,n,i)},e.prototype._escapeSpecial=function(t){return"\\"+this._escapes[t]},e.prototype._fromatRegx=function(t){var e=[];for(var n in t)e.push(t[n].source);return e.join("|").replace(/|$/i,"")},e.prototype._reset=function(){this.lg=ST.tplConfig.open,this.rg=ST.tplConfig.close;var t=this.lg,e=this.rg,n=this._body;this.regxs={execter:new RegExp(t+n+e,"g"),exporter:new RegExp(t+"\\s*="+n+e,"g"),escaper:new RegExp(t+"\\s*=="+n+e,"g")},this.macs=new RegExp(this._fromatRegx(this.regxs),"g")},e}();t.Template=e}(YT||(YT={}));var YT;!function(t){var e=function(){function e(){this.hoadEvent=ST.hoadEvent,this.trigger="body",this.type="on"}return e.prototype.initEvent=function(e,n,i,o,r,s){this.self=this,this.obj=e,this.pobj=n,this.evt=i,this.func=o,this.type=r||this.type,this.trigger=s||this.trigger;var a=t.Event.evts;"off"===this.type&&this.uninitEvent(e.selector,i,o);for(var u=0;u<a.length;u++)a[u]===i&&("window"==e.selector?"on"==r?$(window).off().on(i,this.hoadEvent(n,o)):$(window).off():"document"==e.selector||"html"==e.selector||"body"==e.selector?"on"==r?$(e.selector).off().on(i,this.hoadEvent(n,o)):$(e.selector).off():"on"==r?$(this.trigger).undelegate(e.selector,i,this.hoadEvent(n,o)).delegate(e.selector,i,this.hoadEvent(n,o)):$(this.trigger).undelegate(e.selector,i,this.hoadEvent(n,o)))},e.prototype.uninitEvent=function(t,e,n){"window"==t?$(window).off(e,n):"document"==t||"html"==t||"body"==t?$(t).off(e,n):$(this.trigger).undelegate(t,e,n)},e.evts="abort reset click dblclick tap touchstart touchmove touchend change mouseover mouseout mouseup mousedown mousemove mousewheel drag dragend dragenter dragleave dragover dragstart drop resize scroll submit select keydown keyup keypress touchstart touchend load unload blur focus contextmenu formchange forminput input invalid afterprint beforeprint beforeonload haschange message offline online pagehide pageshow popstate redo storage undo canplay canplaythrough durationchange emptied ended loadeddata loadedmetadata loadstart pause play playing progress ratechange readystatechange seeked seeking stalled suspend timeupdate volumechange waiting cut copy paste".split(/\s+/gi),e}();t.Event=e}(YT||(YT={}));var YT;!function(t){var e=function(){function e(e){this._v=new t.Validate,this._t=new t.Tools,this.setting={dataType:"json",type:"POST",async:!0,timeout:5e3,crossDomain:!0,header:{"Content-type":"application/x-www-form-urlencoded"}},this.setting=ST.extend(e,this.setting),this.xhr=new XMLHttpRequest}return e.prototype._format=function(t,e){var n=t;if("json"===e)try{n=JSON.parse(t)}catch(i){}else if("text"===e)try{n=JSON.stringify(t)}catch(i){}return n},e.prototype._callFunction=function(t,e,n){var i=this._format(t,e);this._v.isFunction(n)&&n(i)},e.prototype._callComplate=function(t,e,n){this._v.isFunction(n)&&n(this._format(t.responseText,e),t)},e.prototype.request=function(t){var e,n=this;if(t&&this._v.isObject(t)&&(e=ST.extend(t,this.setting)),!this._v.isEmpty(e.url)){var i=e.data,o=e.dataType,r=e.type,s="GET"===r.toUpperCase()?e.url.split("?")[0]+this._t.paramData(e.data,!0):e.url,a="GET"===r.toUpperCase()?void 0:i,u=e.header,h="async"in e?e.async:!0;this._callFunction(void 0,o,e.ajaxBefore),this.xhr.open(r,s,h);for(var c in u)this.xhr.setRequestHeader(c,u[c]);this.xhr.onreadystatechange=function(){4===n.xhr.readyState&&(n.xhr.onreadystatechange=null,200===n.xhr.status?n._callFunction(n.xhr.responseText,o,e.success):n._callFunction(n.xhr,o,e.error),n._callComplate(n.xhr,o,e.complate))},this.xhr.send(a)}},e}();t.Ajax=e}(YT||(YT={}));var YT;!function(t){var e=function(){function e(e){this.isInit=!0,this._attributes={},this.ajaxDataType="json",this.ajaxType="POST",this.ajaxBefore=function(){},this.ajaxSuccess=function(){},this.ajaxError=function(){},this.ajaxComplete=function(){},this.ajaxEnd=function(){};for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);this.ajax=new t.Ajax,this._v=new t.Validate,this.__Name__="SYST Model",this.isInit&&this.init()}return e.prototype.init=function(){},e.prototype.set=function(t,e){if(this._v.isEmpty(t))return this;if("object"==typeof t)for(var n in t)this._attributes[n]=t[n];else{if(!("string"==typeof t&&t.length>0))return this;this._attributes[t]=e}},e.prototype.get=function(t){return this._attributes[t]},e.prototype.getItem=function(t,e){var n=(e?window.sessionStorage:window.localStorage).getItem(t);try{n=JSON.parse(n)}catch(i){}return n},e.prototype.setItem=function(t,e,n){function i(t,e){this._v.isObject(e)&&(e=JSON.stringify(e)),(n?window.sessionStorage:window.localStorage).setItem(t,e)}if(this._v.isObject(t))for(var o in t)i(o,t[o]);else{if(!("string"==typeof t&&t.length>0))return this;i(t,e)}},e.prototype.has=function(t){return Boolean(this._attributes[t])},e.prototype.hasItem=function(t,e){return Boolean((e?window.sessionStorage:window.localStorage).getItem(t))},e.prototype.add=function(t,e){this.set(t,e)},e.prototype.remove=function(t){return t&&""!=t?(this._attributes[t]=null,void delete this._attributes[t]):this},e.prototype.removeItem=function(t,e){(e?window.sessionStorage:window.localStorage).removeItem(t)},e.prototype.removeAll=function(t){t?this._attributes=[]:function(){window.localStorage.clear(),window.sessionStorage.clear()}()},e.prototype._getName=function(){return this.__Name__},e.prototype.doRequest=function(t,e,n,i,o){function r(){return this._v.isFunction(p.ajaxBefore)&&(l.beforeSend=p.ajaxBefore.apply(p)),l.beforeSend===!1?!1:void 0}function s(t,e,n,i){var o;return this._v.isFunction(p.ajaxSuccess)&&(o=p.ajaxSuccess.call(p,t,e,n,i)),o===!1?!1:void 0}function a(t,e,n){var i;return this._v.isFunction(p.ajaxError)&&(i=p.ajaxError.call(p,t,e,n))}function u(t,e,n,i){return this._v.isFunction(p.ajaxEnd)&&p.ajaxEnd.call(p,t,e,n,i)}var h,c,p=this,l={};if(e&&"object"==typeof e&&t&&""!=t){o&&this._v.isObject(o)?(h=o.type,c=o.dataType||this.ajaxDataType,l=o):(h=this.ajaxType||"POST",c=this.ajaxDataType||"json");var f=r();if(f!==!1){var d=ST.extend(l,{url:t,type:h,data:e,dataType:c,success:function(t,e,i,o){u(t,e,i,o);var r=s(t,e,i,o);r!==!1&&this._v.isFunction(n)&&n.call(p,t,e,i,o)},error:function(t,e){var n=t.response;try{n=JSON.parse(n)}catch(o){}u(n,t,e,null);var r=a(n,t,e);r!==!1&&this._v.isFunction(i)&&i.call(p,n,t,e)},complete:function(t,e,n,i){this._v.isFunction(p.ajaxComplete)&&p.ajaxComplete.call(p,t,e,n,i)}});if(!window.$)throw new Error("doRequest: $不存在，此方法依赖于(jQuery||Zepto||Ender)");window.$.ajax(d)}}},e.prototype.doAjax=function(t,e,n,i,o){this.doRequest(t,e,n,i,o)},e.prototype.generateApi=function(t,e){var n=this;this._v.isArray(t)&&t.forEach(function(t){Object.defineProperty(n,t,{value:function(i,o,r){n.doAjax(e[t],i,o,r)}})})},e}();t.Model=e}(YT||(YT={}));var YT;!function(t){var e=function(){function e(){window.SYST&&(window.SYST._shareModels={})}return e.getInstance=function(){return this._instance?this._instance:new e},e.prototype.add=function(t,e){window.SYST._shareModels[t]=e},e.prototype.get=function(e){var n=window.SYST._shareModels;return null==e?n:n[e]&&n[e]instanceof t.Model?n[e]:null},e.prototype.remove=function(e){var n=window.SYST._shareModels,i=n[e];return i&&i instanceof t.Model&&(n[e]=null,delete n[e]),i},e.prototype.has=function(t){var e=window.SYST._shareModels;return e[t]},e}();t.ShareModel=e}(YT||(YT={}));var YT;!function(t){var e=function(){function e(e){this.isInit=!0,this.unInit=!1;for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);this.$el={},this.tagPanel="",this.triggerContainer="body",this._v=new t.Validate,this._t=new t.Tools,this._e=new t.Event,this._type="on",!this.unInit&&this._initialize()}return e.getInstance=function(e){return this._self?this._self:new t.View(e)},e.prototype._initialize=function(){if(this.model=this.model?this.model:this.controller?this.controller.getModel():void 0,this.isInit&&this.init&&this.init.apply(this,arguments),this.render){var t="<"+this.tagPanel+"/>";this.$el=$?$(t):this.parseDom("",t),this.render.apply(this,arguments)}this.events&&this.events!={}&&this._v.isObject(this.events)&&this.onEvent()},e.prototype.init=function(){console.log("...View init...")},e.prototype.render=function(){},e.prototype.parseDom=function(t,e){return this._t.template(t,e)},e.prototype.parseEvent=function(t){function e(t,e,r){i.push(t),n.push(e),o.push(r)}if(!t||0==t.length||t==={})return this;var n=[],i=[],o=[];for(var r in t){var s=t[r];if(this._v.isObject(s))for(var a in s){var u=this.parseString(s,a),h=u[0],c=u[1],p=u[2];e(h,c,p)}else{var u=this.parseString(t,r),h=u[0],c=u[1],p=u[2];e(h,c,p)}}return{events:n,elements:i,functions:o}},e.prototype.autoHandleEvent=function(t){var e=this.parseEvent(this.events),n=e.events,i=e.elements,o=e.functions;if(!n||0==n.length||n.length=={})return this;for(var t=t||this._type,r=0,s=n.length;s>r;r++){if(!n[r])throw new Error("对象侦听"+n[r]+"不存在");if(!o[r])throw new Error("对象"+this+"不存在"+o[r]+"方法");if(!i[r])throw new Error("事件函数"+o[r]+"不存在");this._e.initEvent($(i[r]),this,n[r],o[r],t,this.triggerContainer)}return this},e.prototype.parseString=function(t,e){var n=$.trim(e).split(/\s+/gi),i=n[1].replace(/^\$*|[\(*]|[\)*]$/gi,"").replace(/"|'/gi,'"'),o=n[0].replace(/^\s*|\s*$/gi,""),r=t[e];return[i,o,r]},e.prototype.handEvent=function(t,e){for(var n=this,i=[],o=2;o<arguments.length;o++)i.push(arguments[o]);return function(o){i.push(e),i.push(o),t.apply(n,i)}},e.prototype.destroy=function(){this.$el.remove&&this.$el.remove()},e.prototype.onEvent=function(t,e,n){this._v.isEmpty(t)?this.autoHandleEvent("on"):this._e.initEvent(this._v.isString(t)?$(t):t,this,e,n,"on",this.triggerContainer)},e.prototype.offEvent=function(t,e,n){this._v.isEmpty(t)?this.autoHandleEvent("off"):this._e.initEvent(this._v.isString(t)?$(t):t,this,e,n,"off",this.triggerContainer)},e.prototype.getController=function(){return this.controller},e.prototype.getModel=function(){return this.model||this.getController().getModel()},e.hoadEvent=ST.hoadEvent,e}();t.View=e}(YT||(YT={}));var YT;!function(t){var e=function(){function t(t){this.isInit=!0;for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);!0===this.isInit&&this.init()}return t.prototype.init=function(){console.log("...Controller init...")},t.prototype.getModel=function(){return this.model},t.prototype.setModel=function(t){this.model=t},t}();t.Controller=e}(YT||(YT={}));var YT;!function(t){var e=function(){function e(){this.uri=window.location,this._cache={},this._v=new t.Validate,this._t=new t.Tools;for(var e in this.uri)this.uri.hasOwnProperty(e)&&(this[e]=this.uri[e])}return e.prototype._getRouteKey=function(t){return t.replace(/[#!]/gi,"").split("?")[0]},e.prototype.start=function(){this.params=this._t.params();var t=this.hash;if(t&&""!==t){var e=this._getRouteKey(t);this._exec(e)}return this._change(),this},e.prototype.when=function(t,e){this._v.isObject(e)?this._cache[t]=e:this._v.isFunction(e)&&(this._cache[t]=e())},e.prototype["switch"]=function(t){if(this._cache&&{}!==this._cache)return this.params=this._t.params(),this._exec(t),this},e.prototype._exec=function(t){this._execRouter(t)},e.prototype._execRouter=function(t){var e=this,n=this._cache[t];n&&(n.template?this._template(n.template,n.container,function(t){e._execMAction(n,t)}):e._execMAction(n))},e.prototype._execMAction=function(t,e){this.tpl=e;var n={model:t.model,tpl:e,params:this.params,router:this},i={model:t.model,tpl:e,params:this.params,router:this,view:t.view};this._syst=new ST,t.model&&function(){return this._syst.Model(t.model)}(),t.view&&function(){return this._syst.View(ST.extend(t.view,n))}(),t.controller&&function(){return this._syst.Controller(ST.extend(t.controller,i))}(),t.action&&this._v.isFunction(t.action)&&t.action.call(this,t.model,e)},e.prototype._change=function(){function t(t){e.oldURL="#"+t.oldURL.split("#")[1],e.newURL="#"+t.newURL.split("#")[1];var n=e._getRouteKey(e.newURL);e["switch"](n)}var e=this;window.removeEventListener("hashchange",t,!1),window.addEventListener("hashchange",t,!1)},e.prototype._template=function(t,e,n){var i=this,o=window.$("#"+e.replace(/#/gi,""));/<|>/.test(t)?(o.html(t),n&&this._v.isFunction(n)&&n.call(i,t)):o.load(t,function(t){n&&this._v.isFunction(n)&&n.call(i,t)},function(t){throw new Error("load template is failed!")})},e}();t.Router=e}(YT||(YT={}));var YT;!function(t){var e=function(){function t(){}return t}();t.Native=e}(YT||(YT={})),window.SYST=ST.getInstance();